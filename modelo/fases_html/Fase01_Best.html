<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/gradient-yHQUC_QB.png" as="image" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/noise-60BoTA8O.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/Lora-VariableFont_wght-B2ootaw-.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/PTSans-Regular-CxL0S8W7.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/PTSans-Bold-D9fedIX3.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/FiraMono-Regular-BTCkDNvf.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/FiraMono-Medium-DU3aDxX5.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/FiraMono-Bold-CLVRCuM9.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/apple-touch-icon.png" />
    <link rel="manifest" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        var scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          // Guard against race condition where iframe isn't ready
          if (!obj.contentWindow?.document?.documentElement) {
            return;
          }
          var element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          var hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          var newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((entries) => {
          setHeight();
        });
        // Only observe if iframe content is ready
        if (obj.contentWindow?.document?.body) {
          resizeObserver.observe(obj.contentWindow.document.body);
        }
      }
    </script>
    <marimo-filename hidden>Fase01_Best.py</marimo-filename>
    <!-- TODO(Trevor): Legacy, required by VS Code plugin. Remove when plugin is updated (see marimo/server/_templates/template.py) -->
    <marimo-version data-version="{{ version }}" hidden></marimo-version>
    <marimo-user-config data-config="{{ user_config }}" hidden></marimo-user-config>
    <marimo-server-token data-token="{{ server_token }}" hidden></marimo-server-token>
    <!-- /TODO -->
    <title>Fase01 Best</title>
    <script type="module" crossorigin crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/index-BXqkmYCF.js"></script>
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/preload-helper-BnutJmlU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/chunk-DZLz74EQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/react-BcIddLXZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/compiler-runtime-Cr9loedd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/jsx-runtime-mwDPpfh_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useEventListener-D1FLsfmf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/react-dom-D6bRRS5R.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/Combination-BjaZc6gK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/clsx-BlAkgCmw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cn-ZXtYmczU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/menu-items-DwOFR2Zi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/hotkeys-ClCtr3_I.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/button-ZC2axIBq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-o-4-WxUj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/createLucideIcon-CNVopWor.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/check-CuBLr6Cm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/select-5fcaZwou.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/multi-map-D9JaQ_m6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/chevron-right-BV0VfNbL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dropdown-menu-uN_XMhZm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/tooltip-BHnVWzH0.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_Uint8Array-D5Z9rM2X.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_getTag-CVRrQL_Q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_baseIsEqual-CVFfFJm2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/jotai-BTnrNcC1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/invariant-D5a0EE05.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/isArrayLikeObject-DKyJYtr8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/merge-Dvc5opZF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/zod-U2NFpcFA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/utils-DEDX0RLo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/requests-BACZP_uj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/once-C5bmD4W5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/toDate-C3oOx2yr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_baseSlice-BWZ0PeaJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_arrayMap-DQI2GUNb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/isSymbol-xTSywenE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/toString-CBnct2wx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_hasUnicode-3DIK_jNi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/upperFirst-CBQfDRod.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/capitalize-CBqvgOfA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ai-model-dropdown-CvhbTHha.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/badge-Jfhpc30N.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/use-toast-midBZAtS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/constants-CEISdYm1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/Deferred-NfAvvkGM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/config-C6qInAhC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/uuid-D0hUC3Qw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/key-Cx1qY8eM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/connection-Bs4SQ_vu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useLifecycle-DogGOXPh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useNonce-VIoWEX5z.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/capabilities-srilPYuF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/createReducer-CeLhipaI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-MHIqsPCF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-8_YHxBVW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-CbvGwhr0.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-CPUmJw_F.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-DcDuMWp5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-DJV2CjUA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-C14Sk-Bd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-vBG1bGij.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-Oad1venD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/stex-xveX5l_T.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cjs-Ck8KMDI1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_baseProperty-c4IQJQis.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/toNumber-CTOPJrpu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/now-BXqTLlmI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/debounce-BUM2losY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/toInteger-Bor4StOs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/type-o43RKOcp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/marked.esm-BV7g2d65.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/main-ChjX94eX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cells-A69p56PE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/kbd-DbVT085u.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/renderShortcut-DJmsjON-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useEvent-CRDKqG3C.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useDeleteCell-CEsjHDdl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/lazy-oPCv0nK8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/defaultLocale-YmL2k7Vp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/precisionRound-Qxa8hC2h.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/defaultLocale-zQltfbSS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/vega-loader.browser-D2m26-DP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/tooltip-BFMRXuzR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ErrorBoundary-_uEOjNWh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/alert-dialog-8EwWlboa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dialog-BfhgTWm1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useDebounce-DzG_89QJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/numbers-CTSqyVyD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/SSRProvider-B8x7qo1c.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/context-CcLKJeA2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useNumberFormatter-F8R3LBxf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/usePress-BO20vkQb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/input-BNb8K99m.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ImperativeModal-C4fZHLKz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cell-link-D75IV6D1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/alert-BqjCH_7t.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/links-CMl0qG9J.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/state-JZFfOGr9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/MarimoErrorOutput-BATnwNYX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/spinner-CuquyDWA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_arrayReduce-DV4IVFuG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/startCase-RfubwhHM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/strings-DHsDEFo-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/command-Dlk4i3l7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/popover-F0Sfc1dn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useRunCells-BLpH_l8E.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/copy-LsxoSTiV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/copy-Dy_tLkL8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/copy-icon-CE7wmMnS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/mode-Bq6LjPC-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/purify.es-CPMOFAIu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/RenderHTML-DTLkV9Uh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/table-DU76OrPF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/tabs-l9npw3ob.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useAsyncData-CngUoIwV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useIframeCapabilities-DXQ78nsN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/error-banner-DoSAS3iD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/formats-BN93kMCb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useTheme-Biy2QI0v.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/en-US-D2gH55FJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/isValid-BJSfXqfd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/maps-B1z3jt-a.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/shim-Cc3VMan6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/download-ByFIcaoi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/extends-dwNt6GDg.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/emotion-is-prop-valid.esm-OoyWz_0l.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useDateFormatter-CPDTrKqK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/range-ZclXTdAh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/table-C2gUjtJV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/Output-DWmT-7NV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/name-cell-input-DND1MD7b.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useHotkey-NDxGNWnW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/objectWithoutPropertiesLoose-COpOcp6W.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/esm-B3nKz9z-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-GE2AwHvG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-CMHCymvx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-ta4iJSan.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-BcppZLnk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-DRTi9ht4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-BjGT2Oog.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-CXL8T4lt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-B0B_Xnwd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-BcgNLefj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-j2I9I0a7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-DM2w8f7r.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-nhBdVy6b.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-D-JTXier.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/apl-BGS-6pM9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/asciiarmor-CbQH35y7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/asn1-P7HrFGaM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/brainfuck-CSxeyQc4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/clike-Bg9duJDo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/clojure-B94DOmFw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cmake-DQEKyMNG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cobol-CY4gVoPW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/coffeescript-BwWb96Ts.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/commonlisp-Cq_n1sF6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/crystal-BLTq7Sqq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/css-CmDcdojQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cypher-ByytCYVx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/d-xLFRg71F.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/diff-VF6GbDch.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dtd-D8qb8bJW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dylan-CIkom9X4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ecl-8wcmTiom.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/eiffel-D2ZBcT03.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/elm-Cpg3TnMc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/erlang-B4A2pXCG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/simple-mode-BrL6eoj-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/factor-DhbRkYZ5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/forth-C5F1F4pC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/fortran-D7Gl3Tli.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/gas-BS2f8qHc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/gherkin-CVZcskwU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/groovy-BhQsBMwW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/haskell-BPbxlKgK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/haxe-TKSAmiMf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/idl-DFgQu5Ek.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/javascript-dAA8UGkz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/jinja2-BIbcpWyF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/julia-CfdFJG3K.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/livescript-FcXY3DYa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/lua-Co6rjiMf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/mathematica-yb42KhnJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/mbox-Kdy3h0JS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/mirc-DIfBuSAc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/mllike-ClozcVVR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/modelica-DfSVZeoi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/mscgen-BCcB4vmY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/mumps-Zs7zFruB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/nsis-znELVT3h.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ntriples-BZ-Gx5MV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/octave-DbhnFGQl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/oz-C8cfEyhB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/pascal-DjQLfZxE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/perl-BbHwsgL1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/pig-siFNrhhJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/powershell-DtGrdgtc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/properties-ThqBcpfC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/protobuf-RiYv9VfD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/pug-DUVdXXqU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/puppet-U5CQLRYv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/python-Bwt6zAaD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/q-DIhdXtBp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/r-CWawXx6U.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/rpm-CNr8ALvx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ruby-DskfS84U.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/sas-C2b2tSOH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/scheme-Cmmcrp64.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/shell-Dyv1aCg9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/sieve-B_dGzCIS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/smalltalk-intFzbz6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/sparql-BX1c9HJU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/stylus-X6xt1FMB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/swift-BYNJXGdg.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/tcl-BaybuQuE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/textile-77KFAyfi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/toml-D6E8t1IG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/troff-BfktZMhT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ttcn-cfg-CstA0KVC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ttcn-DOlRqUFL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/turtle-Cx-tHjh2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/vb-DerFRxqu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/vbscript-BPEY3B7J.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/velocity-B-lFP8Gk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/verilog-C9TzcLDl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/vhdl-v8a_uH2H.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/webidl-DmZw40AA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/xquery-BrIWpdRx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/yacas-ofPECLUx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/z80-DrGVKC-O.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/esm-DtCFmQ1n.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/trash-CRcefzxk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ConsoleOutput-BJP_UIwR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/icons-DaFojEUL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/add-missing-import-Bc1Nj8aC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/blob-ISoY06EG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/add-cell-with-ai-Bf3hYYIu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/chart-no-axes-column-DYZiSI6e.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/square-function-sjebOKTF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/spec-C5SzKl5N.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/focus-BaSDCTOl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useInstallPackage-I3kefbOO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/column-preview-WPlkULp9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useAddCell-CREgcbTt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/toggle-DlfY8wql.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/api-YJHlT7KM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/globals-Dp5TPAWC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/share-8z32Sr0F.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-DBrqGLzW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/memoize-DhF8x4Aa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_toKey-16owuO_q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_baseSet-L2qemYhz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/utilities.esm-Bjl8-mRM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/floating-outline-1_-JOoBX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/eye-off-_Bp7Ir5E.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/plus-CRGccegF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/readonly-python-code-B4MS39iL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/file-video-camera-DJUITpag.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/file-text-CFgIi1A4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/file-Cz8xVTWu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/types-Bh2kSb2q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/label-Dcu3RhQ4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/form-CaSJmn0I.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/textarea-DeG5mMSH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/circle-x-Dm9uA-wT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/refresh-ccw-Dg4gNnPm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/trash-2-BPux4_UF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/form-DaO98mWt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/field-CaHPDBhq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/switch-4s4187gV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useBoolean-CpaqzlKu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useDeepCompareMemoize-DiJVYA6I.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/LazyAnyLanguageCodeMirror-BovGLUi6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/types-CHAkS4Oz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/prop-types-Dr_68tMt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/es-vLBD1nBl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/VisuallyHidden-DqOWapbP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_baseFlatten-ViL-mfkw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/get-BUGWIXZE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/hasIn-BgJKauE7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_basePickBy-CSDa7ReR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/pick-BQzWKfma.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/square-CYRwTwZO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/download-ptuQ0M1w.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/globe-mi3m-i9B.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/send-CTRovYct.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/refresh-cw-Duwwh0cP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/settings-p8vTgdrN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/bundle.esm-BEDtDq85.js">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cells-BvrC6Bsv.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/Output-j3zW187k.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ConsoleOutput-BFFTcC5Y.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/index-BmcO-QYJ.css">
  
<script data-marimo="true">
    window.__MARIMO_STATIC__ = {};
    window.__MARIMO_STATIC__.files = {};
</script>
</head>
  <body>
    <div id="root"></div>
    <!-- This is a portal for the data editor to render in -->
    <div id="portal" data-testid="glide-portal" style="position: fixed; left: 0; top: 0; z-index: 9999"></div>
    <script data-marimo="true">
      window.__MARIMO_MOUNT_CONFIG__ = {
            "filename": "Fase01_Best.py",
            "mode": "read",
            "version": "0.17.7",
            "serverToken": "static",
            "config": {"ai": {"models": {"custom_models": [], "displayed_models": []}}, "completion": {"activate_on_typing": true, "copilot": false}, "diagnostics": {"sql_linter": true}, "display": {"cell_output": "below", "code_editor_font_size": 14, "dataframes": "rich", "default_table_max_columns": 50, "default_table_page_size": 10, "default_width": "medium", "reference_highlighting": false, "theme": "light"}, "formatting": {"line_length": 79}, "keymap": {"overrides": {}, "preset": "default"}, "language_servers": {"pylsp": {"enable_flake8": false, "enable_mypy": true, "enable_pydocstyle": false, "enable_pyflakes": false, "enable_pylint": false, "enable_ruff": true, "enabled": false}}, "mcp": {"mcpServers": {}, "presets": []}, "package_management": {"manager": "pip"}, "runtime": {"auto_instantiate": false, "auto_reload": "off", "default_sql_output": "auto", "on_cell_change": "autorun", "output_max_bytes": 8000000, "reactive_tests": true, "std_stream_max_bytes": 1000000, "watcher_on_save": "lazy"}, "save": {"autosave": "after_delay", "autosave_delay": 1000, "format_on_save": false}, "server": {"browser": "default", "follow_symlink": false}, "snippets": {"custom_paths": [], "include_default_snippets": true}},
            "configOverrides": {},
            "appConfig": {"sql_output": "auto", "width": "compact"},
            "view": {"showAppCode": true},
            "notebook": {"cells": [{"code": "mo.md(r\"\"\"\n# Fase 2: Feature Engineering (Objetivo: Stock Disponible)\n\nNotebook para la transformaci\u00f3n de `dataset.csv` en un dataset\nlisto para modelado, con el objetivo de predecir `quantity_available`.\n\"\"\")", "code_hash": "b262ef5e79c5177b8237da3f18982d2d", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Hbol", "name": "_"}, {"code": "# Manipulaci\u00f3n y an\u00e1lisis de datos\nimport pandas as pd\nimport numpy as np\n\n# Configuraci\u00f3n de warnings y pandas\nimport warnings\nwarnings.filterwarnings('ignore')\npd.set_option('display.max_columns', None)\npd.set_option('display.float_format', lambda x: '%.3f' % x)\n\nprint(\"Librer\u00edas importadas correctamente.\")", "code_hash": "bc07401ca9be7fa3cdcea5548516f9f2", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "MJUe", "name": "_"}, {"code": "mo.md(r\"\"\"\n## Diccionario de Datos del Dataset Original\n\nBasado en la estructura del dataset, este diccionario de datos describe cada columna:\n\"\"\")", "code_hash": "68239075e6b8279ca00b3fb5708cdf30", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "vblA", "name": "_"}, {"code": "data = {\n    'Variable': [\n        'id', 'created_at', 'product_id', 'product_name', 'product_sku',\n        'supplier_id', 'supplier_name', 'prioridad_proveedor',\n        'quantity_on_hand', 'quantity_reserved', 'quantity_available',\n        'minimum_stock_level', 'reorder_point', 'optimal_stock_level',\n        'reorder_quantity', 'average_daily_usage', 'last_order_date',\n        'last_stock_count_date', 'unit_cost', 'total_value',\n        'expiration_date', 'batch_number', 'warehouse_location',\n        'shelf_location', 'region_almacen', 'stock_status', 'is_active',\n        'last_updated_at', 'created_by_id', 'record_sequence_number',\n        'categoria_producto', 'subcategoria_producto', 'anio', 'mes',\n        'vacaciones_o_no', 'es_feriado', 'temporada_alta'\n    ],\n    'Tipo de Dato': [\n        'int64', 'datetime64[ns]', 'int64', 'object', 'object',\n        'int64', 'object', 'int64',\n        'int64', 'int64', 'int64',\n        'int64', 'int64', 'int64',\n        'int64', 'float64', 'datetime64[ns]',\n        'datetime64[ns]', 'float64', 'float64',\n        'datetime64[ns]', 'object', 'object',\n        'object', 'object', 'object', 'int64',\n        'object', 'int64', 'int64',\n        'object', 'object', 'int64', 'int64',\n        'bool', 'bool', 'bool'\n    ],\n    'Descripci\u00f3n': [\n        'Identificador \u00fanico para cada registro o movimiento de inventario.',\n        'Fecha y hora en que se cre\u00f3 el registro en el sistema.',\n        'Identificador \u00fanico para el producto.',\n        'Nombre descriptivo del producto.',\n        '(Stock Keeping Unit) C\u00f3digo \u00fanico interno del producto.',\n        'Identificador \u00fanico del proveedor del producto.',\n        'Nombre del proveedor.',\n        'Nivel de prioridad asignado al proveedor (ej. 1=Alta, 5=Baja).',\n        'Cantidad f\u00edsica total del producto actualmente en el almac\u00e9n.',\n        'Cantidad del producto que est\u00e1 apartada para pedidos pendientes.',\n        'Cantidad real disponible para la venta (on_hand - reserved).',\n        'Nivel m\u00ednimo de stock antes de que se considere \"bajo stock\".',\n        'Nivel de stock en el cual se debe generar una nueva orden de compra.',\n        'La cantidad ideal de stock que se desea mantener.',\n        'Cantidad est\u00e1ndar que se pide en una nueva orden de compra.',\n        'Promedio de unidades de este producto usadas o vendidas por d\u00eda.',\n        'Fecha en que se realiz\u00f3 la \u00faltima orden de compra de este producto.',\n        'Fecha del \u00faltimo conteo f\u00edsico de este producto en el almac\u00e9n.',\n        'El costo de adquirir una sola unidad del producto.',\n        'Valor total del stock a mano (quantity_on_hand * unit_cost).',\n        'Fecha de caducidad del lote del producto (si aplica).',\n        'N\u00famero de lote para trazabilidad.',\n        'Ubicaci\u00f3n general dentro del almac\u00e9n (ej. \"Bodega A\", \"Zona Fr\u00eda\").',\n        'Ubicaci\u00f3n espec\u00edfica en la estanter\u00eda (ej. \"Pasillo 3, Rack B\").',\n        'Regi\u00f3n del almac\u00e9n (ej. \"Norte\", \"Sur\").', #Descripci\u00f3n corregida\n        'Estado actual del stock (ej. \"activo\", \"obsoleto\").',\n        'Indicador binario de si el producto est\u00e1 activo (1) o inactivo (0).',\n        'Fecha y hora de la \u00faltima actualizaci\u00f3n del registro.',\n        'Identificador del usuario que cre\u00f3 el registro.',\n        'N\u00famero secuencial del registro dentro de un proceso.',\n        'Categor\u00eda principal a la que pertenece el producto.',\n        'Subcategor\u00eda espec\u00edfica del producto.',\n        'A\u00f1o de registro.',\n        'Mes de registro.',\n        'Indicador booleano si es per\u00edodo de vacaciones (True/False).',\n        'Indicador booleano si la fecha es un feriado (True/False).',\n        'Indicador booleano si la fecha corresponde a temporada alta (True/False).'\n    ]\n}\n\ndf_diccionario_original = pd.DataFrame(data)\n\n\n# Esta es la forma correcta de mostrar el DataFrame en la celda.\nmo.ui.dataframe(df_diccionario_original)", "code_hash": "367abb9dfda22c1b1eb30741e43c17d4", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "bkHC", "name": "_"}, {"code": "mo.md(r\"\"\"\n## 1. Carga y Preparaci\u00f3n Base\n\n1.  Cargamos el dataset.\n2.  Convertimos las columnas de fecha a `datetime`.\n3.  **Ordenamos el dataset** por producto (`product_sku`) y\n    fecha (`created_at`). Esto es **fundamental** para\n    que los c\u00e1lculos de lags y medias m\u00f3viles sean correctos.\n\"\"\")", "code_hash": "06bb05a8778cd09cc349217c76eef8e9", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "lEQa", "name": "_"}, {"code": "\ndf = pd.read_csv(\"C:/Users/samil/Desktop/APRENDIZAJE AUTOMATICO/PRIMER INTERCICLO/Practica-2-Aprendizaje-Automactico/data/dataset.csv\")\n\n#  conversi\u00f3n de Fechas\ndate_cols = ['created_at', 'last_order_date', 'expiration_date', 'last_stock_count_date', 'last_updated_at']\nfor col in date_cols:\n    if col in df.columns:\n        df[col] = pd.to_datetime(df[col], errors='coerce')\n\n# definici\u00f3n de Claves\nID_PRODUCTO = 'product_sku'      # SKU \u00fanico del producto\nFECHA_PRINCIPAL = 'created_at'   # Fecha del registro\n\n# nuestra variable objetivo\nVAR_OBJETIVO = 'quantity_available' \n\n# orden\ndf[FECHA_PRINCIPAL] = df[FECHA_PRINCIPAL].fillna(method='ffill')\ndf = df.sort_values(by=[ID_PRODUCTO, FECHA_PRINCIPAL])\n\nprint(f\"Dataset ordenado por '{ID_PRODUCTO}' y '{FECHA_PRINCIPAL}'.\")\nprint(f\"Variable Objetivo para lags/medias: '{VAR_OBJETIVO}'\")\n\ndf.info()", "code_hash": "9e5719e40b34a4cb1e677ce9fe572871", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "PKri", "name": "_"}, {"code": "mo.md(r\"\"\"\n**Justificaci\u00f3n:**\n- Cargamos los datos, convertimos las fechas y ordenamos por \u00b4product_sku\u00b4 y created_at. Al ordenar, nos aseguramos de que todos los c\u00e1lculos de tiempo (lags, medias) ocurran dentro del hilo de cada producto.\n- Con  \u00b4.sort_values()\u00b4 aseguramos que los datos de cada producto sean una \"l\u00ednea de tiempo\" individual. Sin esto, el lag_1 (valor de ayer) tomar\u00eda el valor de un producto totalmente diferente, y el modelo aprender\u00eda mal.\n\"\"\")", "code_hash": "5b70a03935aa6b0110f6afc72e039516", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Xref", "name": "_"}, {"code": "mo.md(r\"\"\"\n## 2. Feature Engineering: Variables Temporales\n\nExtraemos componentes de la fecha principal (`created_at`) para que\nel modelo pueda aprender patrones estacionales\n(ej. \"los lunes se mueve m\u00e1s stock\", \"en verano baja la demanda\").\n\"\"\")", "code_hash": "df540fb63693adc6c87e2313e0e4cc6d", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "SFPL", "name": "_"}, {"code": "mo.md(r\"\"\"\n**Explicaci\u00f3n:** En esta parte creamos dia_de_la_semana, estaci\u00f3n, trimestre...\n- Nuestro modelo de ML no entiende \"Lunes\" o \"True\". Al convertir todo a n\u00fameros (dia_de_la_semana=0, es_feriado=1), le damos un contexto como un calendario\n\"\"\")", "code_hash": "52cf91f2882c61398ea6d5a1ac2eae0a", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "BYtC", "name": "_"}, {"code": "\ndef get_season(month):\n    if month in [12, 1, 2]:\n        return 'Invierno'\n    elif month in [3, 4, 5]:\n        return 'Primavera'\n    elif month in [6, 7, 8]:\n        return 'Verano'\n    else:\n        return 'Oto\u00f1o'\n\n# variables nuevas extra\u00eddas de la fecha principal\nfecha = df[FECHA_PRINCIPAL]\ndf['semana_del_anio'] = fecha.dt.isocalendar().week\ndf['dia_del_mes'] = fecha.dt.day\ndf['dia_de_la_semana'] = fecha.dt.dayofweek  # Lunes=0, Domingo=6\ndf['es_fin_de_semana'] = (df['dia_de_la_semana'] \u003E= 5).astype(int)\ndf['trimestre'] = fecha.dt.quarter\n\n# creaci\u00f3n de 'estacion' usando variable 'mes'\ndf['estacion'] = df['mes'].apply(get_season)\n\n# conversi\u00f3n de variables booleanas existentes a enteros (1/0)\n# el modelo prefiere 1/0 que True/False.\ndf['vacaciones_o_no'] = df['vacaciones_o_no'].astype(int)\ndf['es_feriado'] = df['es_feriado'].astype(int)\ndf['temporada_alta'] = df['temporada_alta'].astype(int)\n\nprint(\"Variables temporales nuevas creadas (semana, dia, trimestre, estacion).\")\nprint(\"Variables booleanas existentes (vacaciones, feriado, temporada_alta) convertidas a 0/1.\")\n\nprint(\"\\n--- df.info() despu\u00e9s de procesar variables temporales ---\")\ndf.info()\nprint(\"\\n--- df.head().T despu\u00e9s de procesar variables temporales ---\")\n# mostramos las variables que acabamos de crear yconvertir\nprint(df[['product_sku', 'created_at', 'mes', 'estacion', 'es_feriado', 'temporada_alta']].head().T)", "code_hash": "6d4dfb7e4f9f4f73f6c88b97c91794ef", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "RGSE", "name": "_"}, {"code": "mo.md(r\"\"\"\n## 3. Feature Engineering: Lags (Variables Sint\u00e9ticas)\n\nCreamos variables \"lag\" (retrasadas) de nuestra `VAR_OBJETIVO`.\nEsto es **lo m\u00e1s importante** para predicci\u00f3n: le decimos al modelo\ncu\u00e1l era el stock disponible \"ayer\", \"la semana pasada\" y \"el mes pasado\".\n\"\"\")", "code_hash": "227401e4963516567ef2ba25a091e9d4", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Kclp", "name": "_"}, {"code": "mo.md(r\"\"\"\n**Explicaci\u00f3n:**\n- Creamos lag_1, lag_7, lag_30 usando quantity_available. Que son la MEMORIA del modelo\n  1. lag_1: Le da al modelo memoria a corto plazo.\n  2. lag_7: Le da memoria semanal (comparar este lunes con el lunes pasado).\n  3. lag_30: Le da memoria mensual.\n  4. El groupby(ID_PRODUCTO) garantiza que el lag_1 de la \"Barra Cereal Choco\" sea el de la \"Barra Cereal Choco\" de ayer, y no el de \"Agua Mineral\".\n\"\"\")", "code_hash": "4cee715ccd669fc310acc995d9ebe038", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "emfo", "name": "_"}, {"code": "\n# .groupby(ID_PRODUCTO) es crucial.\n\ndf['lag_1'] = df.groupby(ID_PRODUCTO)[VAR_OBJETIVO].shift(1)\ndf['lag_7'] = df.groupby(ID_PRODUCTO)[VAR_OBJETIVO].shift(7)\ndf['lag_30'] = df.groupby(ID_PRODUCTO)[VAR_OBJETIVO].shift(30)\n\nprint(f\"Variables Lag (1, 7, 30) creadas para '{VAR_OBJETIVO}'.\")\n\n# mostramos c\u00f3mo se ven (los primeros ser\u00e1n NaN, es normal)\ndf[['product_sku', 'created_at', VAR_OBJETIVO, 'lag_1', 'lag_7']].head()", "code_hash": "716eda76b88a3009f0b3fb3725121db9", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Hstk", "name": "_"}, {"code": "mo.md(r\"\"\"\n## 4. Feature Engineering: Hist\u00f3ricas y Estad\u00edsticas\n\nCalculamos estad\u00edsticas m\u00f3viles para capturar la **tendencia** y\nla **volatilidad** del stock.\n-   **Medias M\u00f3viles:** Suavizan el ruido diario.\n-   **Media Exponencial (EWMA):** Da m\u00e1s peso a los datos recientes.\n\"\"\")", "code_hash": "8108bdfc79abf739e8365203e1a084d2", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "nWHF", "name": "_"}, {"code": "mo.md(r\"\"\"\n**Justificaci\u00f3n:**\n- Creamos media_movil_7d, media_movil_30d y media_movil_exponencial.\n- Dado que el stock diario puede ser \"ruidoso\" (subir y bajar mucho). Las medias m\u00f3viles suavizan este ruido y le muestran al modelo la tendencia general.\n- Esto le da al modelo el CONTEXTO DE TENDENCIA Y VOLATILIDAD. El lag_1 le dice d\u00f3nde estaba ayer, pero la media_movil_30d le dice si esa cifra es \"normal\" o si est\u00e1 muy por encima/debajo de la tendencia del mes. La std_movil_30d (desviaci\u00f3n est\u00e1ndar) le dice qu\u00e9 tan estable o no es el stock de ese producto.\n\"\"\")", "code_hash": "59459ceebbaf859fae8b6e18c265de8a", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "iLit", "name": "_"}, {"code": "# Usamos .transform() para que el resultado (la media)\n# se alinee con el \u00edndice original del dataframe.\n\n#  Variables solicitadas \ndf['media_movil_7d'] = df.groupby(ID_PRODUCTO)[VAR_OBJETIVO].transform(\n    lambda x: x.rolling(7, min_periods=1).mean()\n)\ndf['media_movil_30d'] = df.groupby(ID_PRODUCTO)[VAR_OBJETIVO].transform(\n    lambda x: x.rolling(30, min_periods=1).mean()\n)\ndf['media_movil_exponencial'] = df.groupby(ID_PRODUCTO)[VAR_OBJETIVO].transform(\n    lambda x: x.ewm(span=7, adjust=False).mean()\n)\n\n# ariable extra (necesaria para 'anomalia_stock')\ndf['std_movil_30d'] = df.groupby(ID_PRODUCTO)[VAR_OBJETIVO].transform(\n    lambda x: x.rolling(30, min_periods=1).std()\n)\ndf['std_movil_30d'] = df['std_movil_30d'].fillna(0) \n\nprint(\"Medias m\u00f3viles (7d, 30d, Exp) y Std (30d) creadas.\")", "code_hash": "afd6772e9118a404c9cdcfbeaf08d363", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ZHCJ", "name": "_"}, {"code": "mo.md(r\"\"\"\n## 5. Feature Engineering: Variables Sint\u00e9ticas\n\nCreamos variables de negocio combinando otras.\nEstas variables capturan conceptos m\u00e1s complejos.\n\"\"\")", "code_hash": "ee9f24261378a64e05e916ad80d0e3b5", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ROlb", "name": "_"}, {"code": "mo.md(r\"\"\"\n**Explicaci\u00f3n:**\n- Creamos tendencia_stock (media corta vs. larga), anomalia_stock (qu\u00e9 tan raro es el valor de hoy), ratio_reservado_disponible (qu\u00e9 tan estresado est\u00e1 el stock) y ahora rotacion_estimada_30d (qu\u00e9 tan r\u00e1pido se mueve).\n- Estas son \"features de inteligencia de negocio\". Son ATAJOS para el modelo. En lugar de que el modelo intente descubrir que restar la media de 7 d\u00edas y la de 30 d\u00edas es importante, se lo damos directamente (tendencia_stock). Le damos el \"nivel de estr\u00e9s\" y el \"nivel de velocidad\" pre-calculados.\n\"\"\")", "code_hash": "f0a6899134b4d76026c60c3c33bd2ce5", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "qnkX", "name": "_"}, {"code": "# 'diff' calcula la diferencia con la fila anterior (lag_1)\ndf['variacion_stock_diaria'] = df.groupby(ID_PRODUCTO)[VAR_OBJETIVO].transform('diff')\n\n# Tendencia: Compara la media de corto plazo vs la de largo plazo\ndf['tendencia_stock'] = df['media_movil_7d'] - df['media_movil_30d']\n\n# D\u00edas desde el \u00faltimo pedido\ndf['dias_desde_ultimo_pedido'] = (df[FECHA_PRINCIPAL] - df['last_order_date']).dt.days\ndf['dias_desde_ultimo_pedido'] = df['dias_desde_ultimo_pedido'].fillna(9999)\n\n# Ratio de \"estr\u00e9s\" del stock: Reservado vs Disponible\ndf['ratio_reservado_disponible'] = np.where(\n    df[VAR_OBJETIVO] \u003E 0,          # Si quantity_available \u003E 0\n    df['quantity_reserved'] / df[VAR_OBJETIVO], # Calcula el ratio\n    0                             # Si no, el ratio es 0\n)\n\n# Nivel de Anomal\u00eda (Z-score): Qu\u00e9 tan \"raro\" es el stock de hoy\ndf['anomalia_stock'] = np.where(\n    df['std_movil_30d'] \u003E 0,      # Si la desviaci\u00f3n es \u003E 0\n    (df[VAR_OBJETIVO] - df['media_movil_30d']) / df['std_movil_30d'], # Calcula Z-score\n    0                             # Si no, no hay anomal\u00eda\n)\n\n# calculamos rotacion\n# Usamos 'average_daily_usage' para estimar las \"ventas\" mensuales\ndf['rotacion_estimada_30d'] = np.where(\n    df['media_movil_30d'] \u003E 0, # Evitar divisi\u00f3n por cero\n    (df['average_daily_usage'] * 30) / df['media_movil_30d'],\n    0 # Si no hay stock promedio, no hay rotaci\u00f3n\n)\n\nprint(\"Variables sint\u00e9ticas (variaci\u00f3n, tendencia, ratios, anomal\u00eda) creadas.\")\nprint(\"Variable sint\u00e9tica 'rotacion_estimada_30d' CREADA.\")\n\nprint(\"\\n--- df.info() despu\u00e9s de crear variables sint\u00e9ticas ---\")\ndf.info()\nprint(\"\\n--- df.head().T despu\u00e9s de crear variables sint\u00e9ticas ---\")\nprint(df.head().T)", "code_hash": "87fbb99d8c8930a7d1cff51152ab5fcc", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "TqIu", "name": "_"}, {"code": "mo.md(r\"\"\"\n### Nota sobre `rotacion_promedio_mensual`\n\n\nNo pudimos calcular la rotaci\u00f3n *financiera* (que usa Costo de Ventas),\npero s\u00ed calculamos la **rotaci\u00f3n en unidades** (`rotacion_estimada_30d`)\nusando `average_daily_usage` y `media_movil_30d`.\n\"\"\")", "code_hash": "b8f222cf25dc92afa10a38ee7e6c10d0", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Vxnm", "name": "_"}, {"code": "mo.md(r\"\"\"\n## 6. Limpieza Final y Guardado\n\nLos c\u00e1lculos de lags y medias m\u00f3viles crean valores `NaN` (Nulos)\nal principio de la serie de cada producto (ej. los primeros 30 d\u00edas).\n\n**Eliminamos estas filas incompletas** para que el modelo entrene\nsolo con datos 100% completos.\n\"\"\")", "code_hash": "b942d0ea5f4d6ba7fd69fdb06eaa568d", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "DnEU", "name": "_"}, {"code": "# Ver cu\u00e1ntos nulos se crearon por los nuevos features\nnulos_antes = df.isnull().sum().sort_values(ascending=False)\nprint(\"--- Nulos ANTES de limpiar (Top 10) ---\")\nprint(nulos_antes[nulos_antes \u003E 0].head(10))\n\n# Eliminamos filas donde nuestros lags principales son nulos\ndf_processed = df.dropna(\n    subset=['lag_1', 'lag_7', 'lag_30', 'variacion_stock_diaria']\n)\n\nprint(\"\\n--- Nulos DESPU\u00c9S de limpiar ---\")\nprint(f\"Nulos restantes: {df_processed.isnull().sum().sum()}\")\nprint(f\"\\nFilas originales: {len(df):,}\")\nprint(f\"Filas procesadas: {len(df_processed):,}\")\nprint(f\"Filas eliminadas (por NaNs): {len(df) - len(df_processed):,}\")\n\n# --- Codificaci\u00f3n y Selecci\u00f3n Final ---\n\n# Convertir 'estacion' (categ\u00f3rica) a n\u00fameros (One-Hot Encoding)\ndf_processed = pd.get_dummies(df_processed, columns=['estacion'], drop_first=True)\n\n# Definir columnas a excluir.\n# \u00a1F\u00edjate que 'anio', 'mes', 'vacaciones_o_no', 'es_feriado',\n# 'temporada_alta' NO est\u00e1n en esta lista, por lo tanto se MANTIENEN!\ncols_a_excluir_final = [\n    # IDs y Texto que no aportan valor num\u00e9rico directo\n    'id', 'product_id', 'supplier_id', 'created_by_id', 'record_sequence_number',\n    'product_name', 'supplier_name', 'batch_number', 'warehouse_location', \n    'shelf_location', 'stock_status', 'categoria_producto', 'subcategoria_producto',\n\n    # Columnas de fecha originales que ya fueron transformadas\n    'created_at', 'last_order_date', 'last_stock_count_date', 'expiration_date',\n    'last_updated_at'\n]\n\n# Filtrar las columnas que realmente existen en df_processed\ncols_a_excluir_final = [col for col in cols_a_excluir_final if col in df_processed.columns]\n\ndf_final = df_processed.drop(columns=cols_a_excluir_final, errors='ignore')\n\n# --- Guardado ---\ntry:\n    processed_path = \"C:/Users/samil/Desktop/APRENDIZAJE AUTOMATICO/PRIMER INTERCICLO/Practica-2-Aprendizaje-Automactico/data/dataset_processed_advanced.csv\"\n    df_final.to_csv(processed_path, index=False)\n    print(f\"\\n\u00a1\u00c9xito! Dataset procesado guardado en: {processed_path}\")\n    mo.md(f\"**Dataset guardado en:** `{processed_path}`\")\nexcept Exception as e:\n    print(f\"\\nError al guardar el archivo: {e}\")", "code_hash": "d545533ea78d6d3cad8e71f4e750bfae", "config": {"column": null, "disabled": true, "hide_code": false}, "id": "ulZA", "name": "_"}, {"code": "mo.md(r\"\"\"\n## 7. Revisi\u00f3n del Dataset Final\n\nEste es el dataset final que usaremos para entrenar\nnuestro modelo predictivo.\n\"\"\")\nprint(df_final.info())\ndf_final.head()", "code_hash": "d2e4ee59bfe0a2fb1fffd65930a0cdd9", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ecfG", "name": "_"}, {"code": "mo.md(r\"\"\"\n## Conclusiones de la Fase 1: Feature Engineering\n\n    En esta fase, hemos transformado exitosamente el `dataset.csv` original en un\n    dataset 100% optimizado para Machine Learning. El objetivo ya no es\n    la exploraci\u00f3n (EDA), sino la **preparaci\u00f3n para la predicci\u00f3n**.\n\n**Puntos Principales:**\n\n    **1. Dataset 100% Num\u00e9rico y Limpio:**\n    El resultado final (`dataset_processed_advanced.csv`) tiene **7,050 filas y 41 columnas**,\n    sin valores nulos y en un formato puramente num\u00e9rico. Est\u00e1 listo para ser\n    consumido directamente por un modelo.\n\n    **2. Creaci\u00f3n de \"Memoria\" (Lags):**\n    A\u00f1adimos `lag_1`, `lag_7` y `lag_30`. Estas son las variables m\u00e1s importantes,\n    ya que le dan al modelo la \"memoria\" de d\u00f3nde estaba el stock ayer, la semana\n    pasada y el mes pasado.\n\n    **3. Creaci\u00f3n de \"Contexto\" (Medias M\u00f3viles y Estad\u00edsticas):**\n    No solo le dijimos al modelo *d\u00f3nde* estaba el stock (lags), sino que le dimos\n    *contexto*. Variables como `media_movil_30d` (tendencia estable),\n    `std_movil_30d` (volatilidad) y `anomalia_stock` (qu\u00e9 tan \"raro\" es el valor de hoy)\n    le permiten al modelo tomar decisiones mucho m\u00e1s inteligentes.\n\n    **4. Creaci\u00f3n de \"Inteligencia de Negocio\" (Variables Sint\u00e9ticas):**\n    Creamos variables que capturan conceptos de negocio complejos en un solo n\u00famero.\n    Las m\u00e1s importantes son:\n    - `rotacion_estimada_30d`: Le dice al modelo qu\u00e9 tan *r\u00e1pido* se mueve este producto.\n    - `ratio_reservado_disponible`: Mide el \"estr\u00e9s\" o la presi\u00f3n sobre el stock disponible.\n    - `tendencia_stock`: Indica si el stock est\u00e1 creciendo o disminuyendo (media corta vs. larga).\n\n    **5. El Intercambio: \"Calidad sobre Cantidad\"**\n    Decidimos conscientemente eliminar **450 filas** (el 6% de los datos).\n    Este \"costo\" fue necesario para poder calcular los features de 30 d\u00edas\n    (como `lag_30` y `media_movil_30d`).\n\n    **\u00bfPor qu\u00e9 fue una buena decisi\u00f3n?** Sacrificamos el 6% de nuestros peores datos\n    (el \"arranque en fr\u00edo\" de cada producto, que no ten\u00eda historia) para hacer\n    que el 94% restante de los datos sea m\u00e1s inteligente.\n\"\"\")", "code_hash": "ed5aa57d349138750a3a28133e9fafeb", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Pvdt", "name": "_"}, {"code": "import marimo as mo", "code_hash": "1d0db38904205bec4d6f6f6a1f6cec3e", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ZBYS", "name": "_"}], "metadata": {"marimo_version": "0.17.7"}, "version": "1"},
            "session": {"cells": [{"code_hash": "b262ef5e79c5177b8237da3f18982d2d", "console": [], "id": "Hbol", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch1 id=\"fase-2-feature-engineering-objetivo-stock-disponible\"\u003EFase 2: Feature Engineering (Objetivo: Stock Disponible)\u003C/h1\u003E\n\u003Cspan class=\"paragraph\"\u003ENotebook para la transformaci\u00f3n de \u003Ccode\u003Edataset.csv\u003C/code\u003E en un dataset\nlisto para modelado, con el objetivo de predecir \u003Ccode\u003Equantity_available\u003C/code\u003E.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "bc07401ca9be7fa3cdcea5548516f9f2", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "Librer\u00edas importadas correctamente.\n", "type": "stream"}], "id": "MJUe", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "68239075e6b8279ca00b3fb5708cdf30", "console": [], "id": "vblA", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"diccionario-de-datos-del-dataset-original\"\u003EDiccionario de Datos del Dataset Original\u003C/h2\u003E\n\u003Cspan class=\"paragraph\"\u003EBasado en la estructura del dataset, este diccionario de datos describe cada columna:\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "367abb9dfda22c1b1eb30741e43c17d4", "console": [], "id": "bkHC", "outputs": [{"data": {"text/html": "\u003Cmarimo-ui-element object-id='bkHC-0' random-id='2fd0de88-889c-4409-1077-cca524a74327'\u003E\u003Cmarimo-dataframe data-initial-value='{\u0026quot;transforms\u0026quot;:[]}' data-label='null' data-columns='[[\u0026quot;Variable\u0026quot;,\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;],[\u0026quot;Tipo de Dato\u0026quot;,\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;],[\u0026quot;Descripci\u00f3n\u0026quot;,\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;]]' data-dataframe-name='\u0026quot;df_diccionario_original\u0026quot;' data-total='37' data-page-size='5' data-show-download='true'\u003E\u003C/marimo-dataframe\u003E\u003C/marimo-ui-element\u003E"}, "type": "data"}]}, {"code_hash": "06bb05a8778cd09cc349217c76eef8e9", "console": [], "id": "lEQa", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"1-carga-y-preparacion-base\"\u003E1. Carga y Preparaci\u00f3n Base\u003C/h2\u003E\n\u003Col\u003E\n\u003Cli\u003ECargamos el dataset.\u003C/li\u003E\n\u003Cli\u003EConvertimos las columnas de fecha a \u003Ccode\u003Edatetime\u003C/code\u003E.\u003C/li\u003E\n\u003Cli\u003E\u003Cstrong\u003EOrdenamos el dataset\u003C/strong\u003E por producto (\u003Ccode\u003Eproduct_sku\u003C/code\u003E) y\n    fecha (\u003Ccode\u003Ecreated_at\u003C/code\u003E). Esto es \u003Cstrong\u003Efundamental\u003C/strong\u003E para\n    que los c\u00e1lculos de lags y medias m\u00f3viles sean correctos.\u003C/li\u003E\n\u003C/ol\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "9e5719e40b34a4cb1e677ce9fe572871", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "Dataset ordenado por 'product_sku' y 'created_at'.\nVariable Objetivo para lags/medias: 'quantity_available'\n\u003Cclass 'pandas.core.frame.DataFrame'\u003E\nIndex: 7500 entries, 500 to 7499\nData columns (total 37 columns):\n #   Column                  Non-Null Count  Dtype         \n---  ------                  --------------  -----         \n 0   id                      7500 non-null   int64         \n 1   created_at              7500 non-null   datetime64[ns]\n 2   product_id              7500 non-null   int64         \n 3   product_name            7500 non-null   object        \n 4   product_sku             7500 non-null   object        \n 5   supplier_id             7500 non-null   int64         \n 6   supplier_name           7500 non-null   object        \n 7   prioridad_proveedor     7500 non-null   int64         \n 8   quantity_on_hand        7500 non-null   int64         \n 9   quantity_reserved       7500 non-null   int64         \n 10  quantity_available      7500 non-null   int64         \n 11  minimum_stock_level     7500 non-null   int64         \n 12  reorder_point           7500 non-null   int64         \n 13  optimal_stock_level     7500 non-null   int64         \n 14  reorder_quantity        7500 non-null   int64         \n 15  average_daily_usage     7500 non-null   float64       \n 16  last_order_date         7500 non-null   datetime64[ns]\n 17  last_stock_count_date   7500 non-null   datetime64[ns]\n 18  unit_cost               7500 non-null   float64       \n 19  total_value             7500 non-null   float64       \n 20  expiration_date         7500 non-null   datetime64[ns]\n 21  batch_number            7500 non-null   object        \n 22  warehouse_location      7500 non-null   object        \n 23  shelf_location          7500 non-null   object        \n 24  region_almacen          7500 non-null   object        \n 25  stock_status            7500 non-null   object        \n 26  is_active               7500 non-null   int64         \n 27  last_updated_at         7500 non-null   datetime64[ns]\n 28  created_by_id           7500 non-null   int64         \n 29  record_sequence_number  7500 non-null   int64         \n 30  categoria_producto      7500 non-null   object        \n 31  subcategoria_producto   7500 non-null   object        \n 32  anio                    7500 non-null   int64         \n 33  mes                     7500 non-null   int64         \n 34  vacaciones_o_no         7500 non-null   bool          \n 35  es_feriado              7500 non-null   bool          \n 36  temporada_alta          7500 non-null   bool          \ndtypes: bool(3), datetime64[ns](5), float64(3), int64(16), object(10)\nmemory usage: 2.0+ MB\n", "type": "stream"}], "id": "PKri", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "5b70a03935aa6b0110f6afc72e039516", "console": [], "id": "Xref", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EJustificaci\u00f3n:\u003C/strong\u003E\u003C/span\u003E\n\u003Cul\u003E\n\u003Cli\u003ECargamos los datos, convertimos las fechas y ordenamos por \u00b4product_sku\u00b4 y created_at. Al ordenar, nos aseguramos de que todos los c\u00e1lculos de tiempo (lags, medias) ocurran dentro del hilo de cada producto.\u003C/li\u003E\n\u003Cli\u003ECon  \u00b4.sort_values()\u00b4 aseguramos que los datos de cada producto sean una \"l\u00ednea de tiempo\" individual. Sin esto, el lag_1 (valor de ayer) tomar\u00eda el valor de un producto totalmente diferente, y el modelo aprender\u00eda mal.\u003C/li\u003E\n\u003C/ul\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "df540fb63693adc6c87e2313e0e4cc6d", "console": [], "id": "SFPL", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"2-feature-engineering-variables-temporales\"\u003E2. Feature Engineering: Variables Temporales\u003C/h2\u003E\n\u003Cspan class=\"paragraph\"\u003EExtraemos componentes de la fecha principal (\u003Ccode\u003Ecreated_at\u003C/code\u003E) para que\nel modelo pueda aprender patrones estacionales\n(ej. \"los lunes se mueve m\u00e1s stock\", \"en verano baja la demanda\").\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "52cf91f2882c61398ea6d5a1ac2eae0a", "console": [], "id": "BYtC", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EExplicaci\u00f3n:\u003C/strong\u003E En esta parte creamos dia_de_la_semana, estaci\u00f3n, trimestre...\u003C/span\u003E\n\u003Cul\u003E\n\u003Cli\u003ENuestro modelo de ML no entiende \"Lunes\" o \"True\". Al convertir todo a n\u00fameros (dia_de_la_semana=0, es_feriado=1), le damos un contexto como un calendario\u003C/li\u003E\n\u003C/ul\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "6d4dfb7e4f9f4f73f6c88b97c91794ef", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "Variables temporales nuevas creadas (semana, dia, trimestre, estacion).\nVariables booleanas existentes (vacaciones, feriado, temporada_alta) convertidas a 0/1.\n\n--- df.info() despu\u00e9s de procesar variables temporales ---\n\u003Cclass 'pandas.core.frame.DataFrame'\u003E\nIndex: 7500 entries, 500 to 7499\nData columns (total 43 columns):\n #   Column                  Non-Null Count  Dtype         \n---  ------                  --------------  -----         \n 0   id                      7500 non-null   int64         \n 1   created_at              7500 non-null   datetime64[ns]\n 2   product_id              7500 non-null   int64         \n 3   product_name            7500 non-null   object        \n 4   product_sku             7500 non-null   object        \n 5   supplier_id             7500 non-null   int64         \n 6   supplier_name           7500 non-null   object        \n 7   prioridad_proveedor     7500 non-null   int64         \n 8   quantity_on_hand        7500 non-null   int64         \n 9   quantity_reserved       7500 non-null   int64         \n 10  quantity_available      7500 non-null   int64         \n 11  minimum_stock_level     7500 non-null   int64         \n 12  reorder_point           7500 non-null   int64         \n 13  optimal_stock_level     7500 non-null   int64         \n 14  reorder_quantity        7500 non-null   int64         \n 15  average_daily_usage     7500 non-null   float64       \n 16  last_order_date         7500 non-null   datetime64[ns]\n 17  last_stock_count_date   7500 non-null   datetime64[ns]\n 18  unit_cost               7500 non-null   float64       \n 19  total_value             7500 non-null   float64       \n 20  expiration_date         7500 non-null   datetime64[ns]\n 21  batch_number            7500 non-null   object        \n 22  warehouse_location      7500 non-null   object        \n 23  shelf_location          7500 non-null   object        \n 24  region_almacen          7500 non-null   object        \n 25  stock_status            7500 non-null   object        \n 26  is_active               7500 non-null   int64         \n 27  last_updated_at         7500 non-null   datetime64[ns]\n 28  created_by_id           7500 non-null   int64         \n 29  record_sequence_number  7500 non-null   int64         \n 30  categoria_producto      7500 non-null   object        \n 31  subcategoria_producto   7500 non-null   object        \n 32  anio                    7500 non-null   int64         \n 33  mes                     7500 non-null   int64         \n 34  vacaciones_o_no         7500 non-null   int64         \n 35  es_feriado              7500 non-null   int64         \n 36  temporada_alta          7500 non-null   int64         \n 37  semana_del_anio         7500 non-null   UInt32        \n 38  dia_del_mes             7500 non-null   int32         \n 39  dia_de_la_semana        7500 non-null   int32         \n 40  es_fin_de_semana        7500 non-null   int64         \n 41  trimestre               7500 non-null   int32         \n 42  estacion                7500 non-null   object        \ndtypes: UInt32(1), datetime64[ns](5), float64(3), int32(3), int64(20), object(11)\nmemory usage: 2.4+ MB\n\n--- df.head().T despu\u00e9s de procesar variables temporales ---\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "                                500                  501                  502  \\\nproduct_sku                 BCA-115              BCA-115              BCA-115   \ncreated_at      2024-01-01 00:00:00  2024-01-02 00:00:00  2024-01-03 00:00:00   \nmes                               1                    1                    1   \nestacion                   Invierno             Invierno             Invierno   \nes_feriado                        1                    0                    0   \ntemporada_alta                    1                    1                    1   \n\n                                503                  504  \nproduct_sku                 BCA-115              BCA-115  \ncreated_at      2024-01-04 00:00:00  2024-01-05 00:00:00  \nmes                               1                    1  \nestacion                   Invierno             Invierno  \nes_feriado                        0                    0  \ntemporada_alta                    1                    1  \n", "type": "stream"}], "id": "RGSE", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "227401e4963516567ef2ba25a091e9d4", "console": [], "id": "Kclp", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"3-feature-engineering-lags-variables-sinteticas\"\u003E3. Feature Engineering: Lags (Variables Sint\u00e9ticas)\u003C/h2\u003E\n\u003Cspan class=\"paragraph\"\u003ECreamos variables \"lag\" (retrasadas) de nuestra \u003Ccode\u003EVAR_OBJETIVO\u003C/code\u003E.\nEsto es \u003Cstrong\u003Elo m\u00e1s importante\u003C/strong\u003E para predicci\u00f3n: le decimos al modelo\ncu\u00e1l era el stock disponible \"ayer\", \"la semana pasada\" y \"el mes pasado\".\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "4cee715ccd669fc310acc995d9ebe038", "console": [], "id": "emfo", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EExplicaci\u00f3n:\u003C/strong\u003E\u003C/span\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cspan class=\"paragraph\"\u003ECreamos lag_1, lag_7, lag_30 usando quantity_available. Que son la MEMORIA del modelo\u003C/span\u003E\n\u003Col\u003E\n\u003Cli\u003Elag_1: Le da al modelo memoria a corto plazo.\u003C/li\u003E\n\u003Cli\u003Elag_7: Le da memoria semanal (comparar este lunes con el lunes pasado).\u003C/li\u003E\n\u003Cli\u003Elag_30: Le da memoria mensual.\u003C/li\u003E\n\u003Cli\u003EEl groupby(ID_PRODUCTO) garantiza que el lag_1 de la \"Barra Cereal Choco\" sea el de la \"Barra Cereal Choco\" de ayer, y no el de \"Agua Mineral\".\u003C/li\u003E\n\u003C/ol\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "716eda76b88a3009f0b3fb3725121db9", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "Variables Lag (1, 7, 30) creadas para 'quantity_available'.\n", "type": "stream"}], "id": "Hstk", "outputs": [{"data": {"text/html": "\u003Cmarimo-ui-element object-id='Hstk-0' random-id='5a068636-d7cb-4522-e1d1-194b7f7ff82e'\u003E\u003Cmarimo-table data-initial-value='[]' data-label='null' data-data='\u0026quot;[{\u0026#92;\u0026quot;\u0026#92;\u0026quot;:500,\u0026#92;\u0026quot;product_sku\u0026#92;\u0026quot;:\u0026#92;\u0026quot;BCA-115\u0026#92;\u0026quot;,\u0026#92;\u0026quot;created_at\u0026#92;\u0026quot;:\u0026#92;\u0026quot;2024-01-01T00:00:00.000\u0026#92;\u0026quot;,\u0026#92;\u0026quot;quantity_available\u0026#92;\u0026quot;:351,\u0026#92;\u0026quot;lag_1\u0026#92;\u0026quot;:null,\u0026#92;\u0026quot;lag_7\u0026#92;\u0026quot;:null},{\u0026#92;\u0026quot;\u0026#92;\u0026quot;:501,\u0026#92;\u0026quot;product_sku\u0026#92;\u0026quot;:\u0026#92;\u0026quot;BCA-115\u0026#92;\u0026quot;,\u0026#92;\u0026quot;created_at\u0026#92;\u0026quot;:\u0026#92;\u0026quot;2024-01-02T00:00:00.000\u0026#92;\u0026quot;,\u0026#92;\u0026quot;quantity_available\u0026#92;\u0026quot;:342,\u0026#92;\u0026quot;lag_1\u0026#92;\u0026quot;:351.0,\u0026#92;\u0026quot;lag_7\u0026#92;\u0026quot;:null},{\u0026#92;\u0026quot;\u0026#92;\u0026quot;:502,\u0026#92;\u0026quot;product_sku\u0026#92;\u0026quot;:\u0026#92;\u0026quot;BCA-115\u0026#92;\u0026quot;,\u0026#92;\u0026quot;created_at\u0026#92;\u0026quot;:\u0026#92;\u0026quot;2024-01-03T00:00:00.000\u0026#92;\u0026quot;,\u0026#92;\u0026quot;quantity_available\u0026#92;\u0026quot;:333,\u0026#92;\u0026quot;lag_1\u0026#92;\u0026quot;:342.0,\u0026#92;\u0026quot;lag_7\u0026#92;\u0026quot;:null},{\u0026#92;\u0026quot;\u0026#92;\u0026quot;:503,\u0026#92;\u0026quot;product_sku\u0026#92;\u0026quot;:\u0026#92;\u0026quot;BCA-115\u0026#92;\u0026quot;,\u0026#92;\u0026quot;created_at\u0026#92;\u0026quot;:\u0026#92;\u0026quot;2024-01-04T00:00:00.000\u0026#92;\u0026quot;,\u0026#92;\u0026quot;quantity_available\u0026#92;\u0026quot;:324,\u0026#92;\u0026quot;lag_1\u0026#92;\u0026quot;:333.0,\u0026#92;\u0026quot;lag_7\u0026#92;\u0026quot;:null},{\u0026#92;\u0026quot;\u0026#92;\u0026quot;:504,\u0026#92;\u0026quot;product_sku\u0026#92;\u0026quot;:\u0026#92;\u0026quot;BCA-115\u0026#92;\u0026quot;,\u0026#92;\u0026quot;created_at\u0026#92;\u0026quot;:\u0026#92;\u0026quot;2024-01-05T00:00:00.000\u0026#92;\u0026quot;,\u0026#92;\u0026quot;quantity_available\u0026#92;\u0026quot;:319,\u0026#92;\u0026quot;lag_1\u0026#92;\u0026quot;:324.0,\u0026#92;\u0026quot;lag_7\u0026#92;\u0026quot;:null}]\u0026quot;' data-total-rows='5' data-total-columns='5' data-max-columns='50' data-banner-text='\u0026quot;\u0026quot;' data-pagination='true' data-page-size='10' data-field-types='[[\u0026quot;product_sku\u0026quot;,[\u0026quot;string\u0026quot;,\u0026quot;object\u0026quot;]],[\u0026quot;created_at\u0026quot;,[\u0026quot;datetime\u0026quot;,\u0026quot;datetime64[ns]\u0026quot;]],[\u0026quot;quantity_available\u0026quot;,[\u0026quot;integer\u0026quot;,\u0026quot;int64\u0026quot;]],[\u0026quot;lag_1\u0026quot;,[\u0026quot;number\u0026quot;,\u0026quot;float64\u0026quot;]],[\u0026quot;lag_7\u0026quot;,[\u0026quot;number\u0026quot;,\u0026quot;float64\u0026quot;]]]' data-show-filters='true' data-show-download='true' data-show-column-summaries='false' data-show-data-types='true' data-show-page-size-selector='false' data-show-column-explorer='true' data-show-chart-builder='true' data-row-headers='[[\u0026quot;\u0026quot;,[\u0026quot;integer\u0026quot;,\u0026quot;int64\u0026quot;]]]' data-has-stable-row-id='false' data-lazy='false' data-preload='false'\u003E\u003C/marimo-table\u003E\u003C/marimo-ui-element\u003E"}, "type": "data"}]}, {"code_hash": "8108bdfc79abf739e8365203e1a084d2", "console": [], "id": "nWHF", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"4-feature-engineering-historicas-y-estadisticas\"\u003E4. Feature Engineering: Hist\u00f3ricas y Estad\u00edsticas\u003C/h2\u003E\n\u003Cspan class=\"paragraph\"\u003ECalculamos estad\u00edsticas m\u00f3viles para capturar la \u003Cstrong\u003Etendencia\u003C/strong\u003E y\nla \u003Cstrong\u003Evolatilidad\u003C/strong\u003E del stock.\u003C/span\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Cstrong\u003EMedias M\u00f3viles:\u003C/strong\u003E Suavizan el ruido diario.\u003C/li\u003E\n\u003Cli\u003E\u003Cstrong\u003EMedia Exponencial (EWMA):\u003C/strong\u003E Da m\u00e1s peso a los datos recientes.\u003C/li\u003E\n\u003C/ul\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "59459ceebbaf859fae8b6e18c265de8a", "console": [], "id": "iLit", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EJustificaci\u00f3n:\u003C/strong\u003E\u003C/span\u003E\n\u003Cul\u003E\n\u003Cli\u003ECreamos media_movil_7d, media_movil_30d y media_movil_exponencial.\u003C/li\u003E\n\u003Cli\u003EDado que el stock diario puede ser \"ruidoso\" (subir y bajar mucho). Las medias m\u00f3viles suavizan este ruido y le muestran al modelo la tendencia general.\u003C/li\u003E\n\u003Cli\u003EEsto le da al modelo el CONTEXTO DE TENDENCIA Y VOLATILIDAD. El lag_1 le dice d\u00f3nde estaba ayer, pero la media_movil_30d le dice si esa cifra es \"normal\" o si est\u00e1 muy por encima/debajo de la tendencia del mes. La std_movil_30d (desviaci\u00f3n est\u00e1ndar) le dice qu\u00e9 tan estable o no es el stock de ese producto.\u003C/li\u003E\n\u003C/ul\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "afd6772e9118a404c9cdcfbeaf08d363", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "Medias m\u00f3viles (7d, 30d, Exp) y Std (30d) creadas.\n", "type": "stream"}], "id": "ZHCJ", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "ee9f24261378a64e05e916ad80d0e3b5", "console": [], "id": "ROlb", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"5-feature-engineering-variables-sinteticas\"\u003E5. Feature Engineering: Variables Sint\u00e9ticas\u003C/h2\u003E\n\u003Cspan class=\"paragraph\"\u003ECreamos variables de negocio combinando otras.\nEstas variables capturan conceptos m\u00e1s complejos.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "f0a6899134b4d76026c60c3c33bd2ce5", "console": [], "id": "qnkX", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EExplicaci\u00f3n:\u003C/strong\u003E\u003C/span\u003E\n\u003Cul\u003E\n\u003Cli\u003ECreamos tendencia_stock (media corta vs. larga), anomalia_stock (qu\u00e9 tan raro es el valor de hoy), ratio_reservado_disponible (qu\u00e9 tan estresado est\u00e1 el stock) y ahora rotacion_estimada_30d (qu\u00e9 tan r\u00e1pido se mueve).\u003C/li\u003E\n\u003Cli\u003EEstas son \"features de inteligencia de negocio\". Son ATAJOS para el modelo. En lugar de que el modelo intente descubrir que restar la media de 7 d\u00edas y la de 30 d\u00edas es importante, se lo damos directamente (tendencia_stock). Le damos el \"nivel de estr\u00e9s\" y el \"nivel de velocidad\" pre-calculados.\u003C/li\u003E\n\u003C/ul\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "87fbb99d8c8930a7d1cff51152ab5fcc", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "Variables sint\u00e9ticas (variaci\u00f3n, tendencia, ratios, anomal\u00eda) creadas.\nVariable sint\u00e9tica 'rotacion_estimada_30d' CREADA.\n\n--- df.info() despu\u00e9s de crear variables sint\u00e9ticas ---\n\u003Cclass 'pandas.core.frame.DataFrame'\u003E\nIndex: 7500 entries, 500 to 7499\nData columns (total 56 columns):\n #   Column                      Non-Null Count  Dtype         \n---  ------                      --------------  -----         \n 0   id                          7500 non-null   int64         \n 1   created_at                  7500 non-null   datetime64[ns]\n 2   product_id                  7500 non-null   int64         \n 3   product_name                7500 non-null   object        \n 4   product_sku                 7500 non-null   object        \n 5   supplier_id                 7500 non-null   int64         \n 6   supplier_name               7500 non-null   object        \n 7   prioridad_proveedor         7500 non-null   int64         \n 8   quantity_on_hand            7500 non-null   int64         \n 9   quantity_reserved           7500 non-null   int64         \n 10  quantity_available          7500 non-null   int64         \n 11  minimum_stock_level         7500 non-null   int64         \n 12  reorder_point               7500 non-null   int64         \n 13  optimal_stock_level         7500 non-null   int64         \n 14  reorder_quantity            7500 non-null   int64         \n 15  average_daily_usage         7500 non-null   float64       \n 16  last_order_date             7500 non-null   datetime64[ns]\n 17  last_stock_count_date       7500 non-null   datetime64[ns]\n 18  unit_cost                   7500 non-null   float64       \n 19  total_value                 7500 non-null   float64       \n 20  expiration_date             7500 non-null   datetime64[ns]\n 21  batch_number                7500 non-null   object        \n 22  warehouse_location          7500 non-null   object        \n 23  shelf_location              7500 non-null   object        \n 24  region_almacen              7500 non-null   object        \n 25  stock_status                7500 non-null   object        \n 26  is_active                   7500 non-null   int64         \n 27  last_updated_at             7500 non-null   datetime64[ns]\n 28  created_by_id               7500 non-null   int64         \n 29  record_sequence_number      7500 non-null   int64         \n 30  categoria_producto          7500 non-null   object        \n 31  subcategoria_producto       7500 non-null   object        \n 32  anio                        7500 non-null   int64         \n 33  mes                         7500 non-null   int64         \n 34  vacaciones_o_no             7500 non-null   int64         \n 35  es_feriado                  7500 non-null   int64         \n 36  temporada_alta              7500 non-null   int64         \n 37  semana_del_anio             7500 non-null   UInt32        \n 38  dia_del_mes                 7500 non-null   int32         \n 39  dia_de_la_semana            7500 non-null   int32         \n 40  es_fin_de_semana            7500 non-null   int64         \n 41  trimestre                   7500 non-null   int32         \n 42  estacion                    7500 non-null   object        \n 43  lag_1                       7485 non-null   float64       \n 44  lag_7                       7395 non-null   float64       \n 45  lag_30                      7050 non-null   float64       \n 46  media_movil_7d              7500 non-null   float64       \n 47  media_movil_30d             7500 non-null   float64       \n 48  media_movil_exponencial     7500 non-null   float64       \n 49  std_movil_30d               7500 non-null   float64       \n 50  variacion_stock_diaria      7485 non-null   float64       \n 51  tendencia_stock             7500 non-null   float64       \n 52  dias_desde_ultimo_pedido    7500 non-null   int64         \n 53  ratio_reservado_disponible  7500 non-null   float64       \n 54  anomalia_stock              7500 non-null   float64       \n 55  rotacion_estimada_30d       7500 non-null   float64       \ndtypes: UInt32(1), datetime64[ns](5), float64(15), int32(3), int64(21), object(11)\nmemory usage: 3.2+ MB\n\n--- df.head().T despu\u00e9s de crear variables sint\u00e9ticas ---\n                                                 500  \\\nid                                                 1   \ncreated_at                       2024-01-01 00:00:00   \nproduct_id                                       115   \nproduct_name                Barra Chocolate Avellana   \nproduct_sku                                  BCA-115   \n...                                              ...   \ntendencia_stock                                0.000   \ndias_desde_ultimo_pedido                           3   \nratio_reservado_disponible                     0.051   \nanomalia_stock                                 0.000   \nrotacion_estimada_30d                          0.940   \n\n                                                 501  \\\nid                                                 2   \ncreated_at                       2024-01-02 00:00:00   \nproduct_id                                       115   \nproduct_name                Barra Chocolate Avellana   \nproduct_sku                                  BCA-115   \n...                                              ...   \ntendencia_stock                                0.000   \ndias_desde_ultimo_pedido                           2   \nratio_reservado_disponible                     0.044   \nanomalia_stock                                -0.707   \nrotacion_estimada_30d                          0.866   \n\n                                                 502  \\\nid                                                 3   \ncreated_at                       2024-01-03 00:00:00   \nproduct_id                                       115   \nproduct_name                Barra Chocolate Avellana   \nproduct_sku                                  BCA-115   \n...                                              ...   \ntendencia_stock                                0.000   \ndias_desde_ultimo_pedido                           3   \nratio_reservado_disponible                     0.060   \nanomalia_stock                                -1.000   \nrotacion_estimada_30d                          0.877   \n\n                                                 503                       504  \nid                                                 4                         5  \ncreated_at                       2024-01-04 00:00:00       2024-01-05 00:00:00  \nproduct_id                                       115                       115  \nproduct_name                Barra Chocolate Avellana  Barra Chocolate Avellana  \nproduct_sku                                  BCA-115                   BCA-115  \n...                                              ...                       ...  \ntendencia_stock                                0.000                     0.000  \ndias_desde_ultimo_pedido                           4                         1  \nratio_reservado_disponible                     0.062                     0.053  \nanomalia_stock                                -1.162                    -1.136  \nrotacion_estimada_30d                          0.889                     0.899  \n\n[56 rows x 5 columns]\n", "type": "stream"}], "id": "TqIu", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "b8f222cf25dc92afa10a38ee7e6c10d0", "console": [], "id": "Vxnm", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"nota-sobre-rotacion_promedio_mensual\"\u003ENota sobre \u003Ccode\u003Erotacion_promedio_mensual\u003C/code\u003E\u003C/h3\u003E\n\u003Cspan class=\"paragraph\"\u003ENo pudimos calcular la rotaci\u00f3n \u003Cem\u003Efinanciera\u003C/em\u003E (que usa Costo de Ventas),\npero s\u00ed calculamos la \u003Cstrong\u003Erotaci\u00f3n en unidades\u003C/strong\u003E (\u003Ccode\u003Erotacion_estimada_30d\u003C/code\u003E)\nusando \u003Ccode\u003Eaverage_daily_usage\u003C/code\u003E y \u003Ccode\u003Emedia_movil_30d\u003C/code\u003E.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "b942d0ea5f4d6ba7fd69fdb06eaa568d", "console": [], "id": "DnEU", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"6-limpieza-final-y-guardado\"\u003E6. Limpieza Final y Guardado\u003C/h2\u003E\n\u003Cspan class=\"paragraph\"\u003ELos c\u00e1lculos de lags y medias m\u00f3viles crean valores \u003Ccode\u003ENaN\u003C/code\u003E (Nulos)\nal principio de la serie de cada producto (ej. los primeros 30 d\u00edas).\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EEliminamos estas filas incompletas\u003C/strong\u003E para que el modelo entrene\nsolo con datos 100% completos.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "d545533ea78d6d3cad8e71f4e750bfae", "console": [], "id": "ulZA", "outputs": []}, {"code_hash": "d2e4ee59bfe0a2fb1fffd65930a0cdd9", "console": [], "id": "ecfG", "outputs": []}, {"code_hash": "ed5aa57d349138750a3a28133e9fafeb", "console": [], "id": "Pvdt", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"conclusiones-de-la-fase-1-feature-engineering\"\u003EConclusiones de la Fase 1: Feature Engineering\u003C/h2\u003E\n\u003Cspan class=\"paragraph\"\u003EEn esta fase, hemos transformado exitosamente el \u003Ccode\u003Edataset.csv\u003C/code\u003E original en un\n    dataset 100% optimizado para Machine Learning. El objetivo ya no es\n    la exploraci\u00f3n (EDA), sino la \u003Cstrong\u003Epreparaci\u00f3n para la predicci\u00f3n\u003C/strong\u003E.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EPuntos Principales:\u003C/strong\u003E\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003E1. Dataset 100% Num\u00e9rico y Limpio:\u003C/strong\u003E\n    El resultado final (\u003Ccode\u003Edataset_processed_advanced.csv\u003C/code\u003E) tiene \u003Cstrong\u003E7,050 filas y 41 columnas\u003C/strong\u003E,\n    sin valores nulos y en un formato puramente num\u00e9rico. Est\u00e1 listo para ser\n    consumido directamente por un modelo.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003E2. Creaci\u00f3n de \"Memoria\" (Lags):\u003C/strong\u003E\n    A\u00f1adimos \u003Ccode\u003Elag_1\u003C/code\u003E, \u003Ccode\u003Elag_7\u003C/code\u003E y \u003Ccode\u003Elag_30\u003C/code\u003E. Estas son las variables m\u00e1s importantes,\n    ya que le dan al modelo la \"memoria\" de d\u00f3nde estaba el stock ayer, la semana\n    pasada y el mes pasado.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003E3. Creaci\u00f3n de \"Contexto\" (Medias M\u00f3viles y Estad\u00edsticas):\u003C/strong\u003E\n    No solo le dijimos al modelo \u003Cem\u003Ed\u00f3nde\u003C/em\u003E estaba el stock (lags), sino que le dimos\n    \u003Cem\u003Econtexto\u003C/em\u003E. Variables como \u003Ccode\u003Emedia_movil_30d\u003C/code\u003E (tendencia estable),\n    \u003Ccode\u003Estd_movil_30d\u003C/code\u003E (volatilidad) y \u003Ccode\u003Eanomalia_stock\u003C/code\u003E (qu\u00e9 tan \"raro\" es el valor de hoy)\n    le permiten al modelo tomar decisiones mucho m\u00e1s inteligentes.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003E4. Creaci\u00f3n de \"Inteligencia de Negocio\" (Variables Sint\u00e9ticas):\u003C/strong\u003E\n    Creamos variables que capturan conceptos de negocio complejos en un solo n\u00famero.\n    Las m\u00e1s importantes son:\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E- \u003Ccode\u003Erotacion_estimada_30d\u003C/code\u003E: Le dice al modelo qu\u00e9 tan \u003Cem\u003Er\u00e1pido\u003C/em\u003E se mueve este producto.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E- \u003Ccode\u003Eratio_reservado_disponible\u003C/code\u003E: Mide el \"estr\u00e9s\" o la presi\u00f3n sobre el stock disponible.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E- \u003Ccode\u003Etendencia_stock\u003C/code\u003E: Indica si el stock est\u00e1 creciendo o disminuyendo (media corta vs. larga).\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003E5. El Intercambio: \"Calidad sobre Cantidad\"\u003C/strong\u003E\n    Decidimos conscientemente eliminar \u003Cstrong\u003E450 filas\u003C/strong\u003E (el 6% de los datos).\n    Este \"costo\" fue necesario para poder calcular los features de 30 d\u00edas\n    (como \u003Ccode\u003Elag_30\u003C/code\u003E y \u003Ccode\u003Emedia_movil_30d\u003C/code\u003E).\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003E\u00bfPor qu\u00e9 fue una buena decisi\u00f3n?\u003C/strong\u003E Sacrificamos el 6% de nuestros peores datos\n    (el \"arranque en fr\u00edo\" de cada producto, que no ten\u00eda historia) para hacer\n    que el 94% restante de los datos sea m\u00e1s inteligente.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "1d0db38904205bec4d6f6f6a1f6cec3e", "console": [], "id": "ZBYS", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}], "metadata": {"marimo_version": "0.17.7"}, "version": "1"},
            "runtimeConfig": null,
        };
    </script>
  
<marimo-code hidden="">
    import%20marimo%0A%0A__generated_with%20%3D%20%220.17.7%22%0Aapp%20%3D%20marimo.App()%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%20Fase%202%3A%20Feature%20Engineering%20(Objetivo%3A%20Stock%20Disponible)%0A%0A%20%20%20%20Notebook%20para%20la%20transformaci%C3%B3n%20de%20%60dataset.csv%60%20en%20un%20dataset%0A%20%20%20%20listo%20para%20modelado%2C%20con%20el%20objetivo%20de%20predecir%20%60quantity_available%60.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20%23%20Manipulaci%C3%B3n%20y%20an%C3%A1lisis%20de%20datos%0A%20%20%20%20import%20pandas%20as%20pd%0A%20%20%20%20import%20numpy%20as%20np%0A%0A%20%20%20%20%23%20Configuraci%C3%B3n%20de%20warnings%20y%20pandas%0A%20%20%20%20import%20warnings%0A%20%20%20%20warnings.filterwarnings('ignore')%0A%20%20%20%20pd.set_option('display.max_columns'%2C%20None)%0A%20%20%20%20pd.set_option('display.float_format'%2C%20lambda%20x%3A%20'%25.3f'%20%25%20x)%0A%0A%20%20%20%20print(%22Librer%C3%ADas%20importadas%20correctamente.%22)%0A%20%20%20%20return%20np%2C%20pd%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Diccionario%20de%20Datos%20del%20Dataset%20Original%0A%0A%20%20%20%20Basado%20en%20la%20estructura%20del%20dataset%2C%20este%20diccionario%20de%20datos%20describe%20cada%20columna%3A%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo%2C%20pd)%3A%0A%20%20%20%20data%20%3D%20%7B%0A%20%20%20%20%20%20%20%20'Variable'%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20'id'%2C%20'created_at'%2C%20'product_id'%2C%20'product_name'%2C%20'product_sku'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'supplier_id'%2C%20'supplier_name'%2C%20'prioridad_proveedor'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'quantity_on_hand'%2C%20'quantity_reserved'%2C%20'quantity_available'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'minimum_stock_level'%2C%20'reorder_point'%2C%20'optimal_stock_level'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'reorder_quantity'%2C%20'average_daily_usage'%2C%20'last_order_date'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'last_stock_count_date'%2C%20'unit_cost'%2C%20'total_value'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'expiration_date'%2C%20'batch_number'%2C%20'warehouse_location'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'shelf_location'%2C%20'region_almacen'%2C%20'stock_status'%2C%20'is_active'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'last_updated_at'%2C%20'created_by_id'%2C%20'record_sequence_number'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'categoria_producto'%2C%20'subcategoria_producto'%2C%20'anio'%2C%20'mes'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'vacaciones_o_no'%2C%20'es_feriado'%2C%20'temporada_alta'%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20'Tipo%20de%20Dato'%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20'int64'%2C%20'datetime64%5Bns%5D'%2C%20'int64'%2C%20'object'%2C%20'object'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'int64'%2C%20'object'%2C%20'int64'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'int64'%2C%20'int64'%2C%20'int64'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'int64'%2C%20'int64'%2C%20'int64'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'int64'%2C%20'float64'%2C%20'datetime64%5Bns%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'datetime64%5Bns%5D'%2C%20'float64'%2C%20'float64'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'datetime64%5Bns%5D'%2C%20'object'%2C%20'object'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'object'%2C%20'object'%2C%20'object'%2C%20'int64'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'object'%2C%20'int64'%2C%20'int64'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'object'%2C%20'object'%2C%20'int64'%2C%20'int64'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'bool'%2C%20'bool'%2C%20'bool'%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20'Descripci%C3%B3n'%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20'Identificador%20%C3%BAnico%20para%20cada%20registro%20o%20movimiento%20de%20inventario.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Fecha%20y%20hora%20en%20que%20se%20cre%C3%B3%20el%20registro%20en%20el%20sistema.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Identificador%20%C3%BAnico%20para%20el%20producto.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Nombre%20descriptivo%20del%20producto.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'(Stock%20Keeping%20Unit)%20C%C3%B3digo%20%C3%BAnico%20interno%20del%20producto.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Identificador%20%C3%BAnico%20del%20proveedor%20del%20producto.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Nombre%20del%20proveedor.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Nivel%20de%20prioridad%20asignado%20al%20proveedor%20(ej.%201%3DAlta%2C%205%3DBaja).'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Cantidad%20f%C3%ADsica%20total%20del%20producto%20actualmente%20en%20el%20almac%C3%A9n.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Cantidad%20del%20producto%20que%20est%C3%A1%20apartada%20para%20pedidos%20pendientes.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Cantidad%20real%20disponible%20para%20la%20venta%20(on_hand%20-%20reserved).'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Nivel%20m%C3%ADnimo%20de%20stock%20antes%20de%20que%20se%20considere%20%22bajo%20stock%22.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Nivel%20de%20stock%20en%20el%20cual%20se%20debe%20generar%20una%20nueva%20orden%20de%20compra.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'La%20cantidad%20ideal%20de%20stock%20que%20se%20desea%20mantener.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Cantidad%20est%C3%A1ndar%20que%20se%20pide%20en%20una%20nueva%20orden%20de%20compra.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Promedio%20de%20unidades%20de%20este%20producto%20usadas%20o%20vendidas%20por%20d%C3%ADa.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Fecha%20en%20que%20se%20realiz%C3%B3%20la%20%C3%BAltima%20orden%20de%20compra%20de%20este%20producto.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Fecha%20del%20%C3%BAltimo%20conteo%20f%C3%ADsico%20de%20este%20producto%20en%20el%20almac%C3%A9n.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'El%20costo%20de%20adquirir%20una%20sola%20unidad%20del%20producto.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Valor%20total%20del%20stock%20a%20mano%20(quantity_on_hand%20*%20unit_cost).'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Fecha%20de%20caducidad%20del%20lote%20del%20producto%20(si%20aplica).'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'N%C3%BAmero%20de%20lote%20para%20trazabilidad.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Ubicaci%C3%B3n%20general%20dentro%20del%20almac%C3%A9n%20(ej.%20%22Bodega%20A%22%2C%20%22Zona%20Fr%C3%ADa%22).'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Ubicaci%C3%B3n%20espec%C3%ADfica%20en%20la%20estanter%C3%ADa%20(ej.%20%22Pasillo%203%2C%20Rack%20B%22).'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Regi%C3%B3n%20del%20almac%C3%A9n%20(ej.%20%22Norte%22%2C%20%22Sur%22).'%2C%20%23Descripci%C3%B3n%20corregida%0A%20%20%20%20%20%20%20%20%20%20%20%20'Estado%20actual%20del%20stock%20(ej.%20%22activo%22%2C%20%22obsoleto%22).'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Indicador%20binario%20de%20si%20el%20producto%20est%C3%A1%20activo%20(1)%20o%20inactivo%20(0).'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Fecha%20y%20hora%20de%20la%20%C3%BAltima%20actualizaci%C3%B3n%20del%20registro.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Identificador%20del%20usuario%20que%20cre%C3%B3%20el%20registro.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'N%C3%BAmero%20secuencial%20del%20registro%20dentro%20de%20un%20proceso.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Categor%C3%ADa%20principal%20a%20la%20que%20pertenece%20el%20producto.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Subcategor%C3%ADa%20espec%C3%ADfica%20del%20producto.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'A%C3%B1o%20de%20registro.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Mes%20de%20registro.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Indicador%20booleano%20si%20es%20per%C3%ADodo%20de%20vacaciones%20(True%2FFalse).'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Indicador%20booleano%20si%20la%20fecha%20es%20un%20feriado%20(True%2FFalse).'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'Indicador%20booleano%20si%20la%20fecha%20corresponde%20a%20temporada%20alta%20(True%2FFalse).'%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%7D%0A%0A%20%20%20%20df_diccionario_original%20%3D%20pd.DataFrame(data)%0A%0A%0A%20%20%20%20%23%20Esta%20es%20la%20forma%20correcta%20de%20mostrar%20el%20DataFrame%20en%20la%20celda.%0A%20%20%20%20mo.ui.dataframe(df_diccionario_original)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%201.%20Carga%20y%20Preparaci%C3%B3n%20Base%0A%0A%20%20%20%201.%20%20Cargamos%20el%20dataset.%0A%20%20%20%202.%20%20Convertimos%20las%20columnas%20de%20fecha%20a%20%60datetime%60.%0A%20%20%20%203.%20%20**Ordenamos%20el%20dataset**%20por%20producto%20(%60product_sku%60)%20y%0A%20%20%20%20%20%20%20%20fecha%20(%60created_at%60).%20Esto%20es%20**fundamental**%20para%0A%20%20%20%20%20%20%20%20que%20los%20c%C3%A1lculos%20de%20lags%20y%20medias%20m%C3%B3viles%20sean%20correctos.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(pd)%3A%0A%0A%20%20%20%20df%20%3D%20pd.read_csv(%22C%3A%2FUsers%2Fsamil%2FDesktop%2FAPRENDIZAJE%20AUTOMATICO%2FPRIMER%20INTERCICLO%2FPractica-2-Aprendizaje-Automactico%2Fdata%2Fdataset.csv%22)%0A%0A%20%20%20%20%23%20%20conversi%C3%B3n%20de%20Fechas%0A%20%20%20%20date_cols%20%3D%20%5B'created_at'%2C%20'last_order_date'%2C%20'expiration_date'%2C%20'last_stock_count_date'%2C%20'last_updated_at'%5D%0A%20%20%20%20for%20col%20in%20date_cols%3A%0A%20%20%20%20%20%20%20%20if%20col%20in%20df.columns%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20df%5Bcol%5D%20%3D%20pd.to_datetime(df%5Bcol%5D%2C%20errors%3D'coerce')%0A%0A%20%20%20%20%23%20definici%C3%B3n%20de%20Claves%0A%20%20%20%20ID_PRODUCTO%20%3D%20'product_sku'%20%20%20%20%20%20%23%20SKU%20%C3%BAnico%20del%20producto%0A%20%20%20%20FECHA_PRINCIPAL%20%3D%20'created_at'%20%20%20%23%20Fecha%20del%20registro%0A%0A%20%20%20%20%23%20nuestra%20variable%20objetivo%0A%20%20%20%20VAR_OBJETIVO%20%3D%20'quantity_available'%20%0A%0A%20%20%20%20%23%20orden%0A%20%20%20%20df%5BFECHA_PRINCIPAL%5D%20%3D%20df%5BFECHA_PRINCIPAL%5D.fillna(method%3D'ffill')%0A%20%20%20%20df%20%3D%20df.sort_values(by%3D%5BID_PRODUCTO%2C%20FECHA_PRINCIPAL%5D)%0A%0A%20%20%20%20print(f%22Dataset%20ordenado%20por%20'%7BID_PRODUCTO%7D'%20y%20'%7BFECHA_PRINCIPAL%7D'.%22)%0A%20%20%20%20print(f%22Variable%20Objetivo%20para%20lags%2Fmedias%3A%20'%7BVAR_OBJETIVO%7D'%22)%0A%0A%20%20%20%20df.info()%0A%20%20%20%20return%20FECHA_PRINCIPAL%2C%20ID_PRODUCTO%2C%20VAR_OBJETIVO%2C%20df%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20**Justificaci%C3%B3n%3A**%0A%20%20%20%20-%20Cargamos%20los%20datos%2C%20convertimos%20las%20fechas%20y%20ordenamos%20por%20%C2%B4product_sku%C2%B4%20y%20created_at.%20Al%20ordenar%2C%20nos%20aseguramos%20de%20que%20todos%20los%20c%C3%A1lculos%20de%20tiempo%20(lags%2C%20medias)%20ocurran%20dentro%20del%20hilo%20de%20cada%20producto.%0A%20%20%20%20-%20Con%20%20%C2%B4.sort_values()%C2%B4%20aseguramos%20que%20los%20datos%20de%20cada%20producto%20sean%20una%20%22l%C3%ADnea%20de%20tiempo%22%20individual.%20Sin%20esto%2C%20el%20lag_1%20(valor%20de%20ayer)%20tomar%C3%ADa%20el%20valor%20de%20un%20producto%20totalmente%20diferente%2C%20y%20el%20modelo%20aprender%C3%ADa%20mal.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%202.%20Feature%20Engineering%3A%20Variables%20Temporales%0A%0A%20%20%20%20Extraemos%20componentes%20de%20la%20fecha%20principal%20(%60created_at%60)%20para%20que%0A%20%20%20%20el%20modelo%20pueda%20aprender%20patrones%20estacionales%0A%20%20%20%20(ej.%20%22los%20lunes%20se%20mueve%20m%C3%A1s%20stock%22%2C%20%22en%20verano%20baja%20la%20demanda%22).%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20**Explicaci%C3%B3n%3A**%20En%20esta%20parte%20creamos%20dia_de_la_semana%2C%20estaci%C3%B3n%2C%20trimestre...%0A%20%20%20%20-%20Nuestro%20modelo%20de%20ML%20no%20entiende%20%22Lunes%22%20o%20%22True%22.%20Al%20convertir%20todo%20a%20n%C3%BAmeros%20(dia_de_la_semana%3D0%2C%20es_feriado%3D1)%2C%20le%20damos%20un%20contexto%20como%20un%20calendario%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(FECHA_PRINCIPAL%2C%20df)%3A%0A%0A%20%20%20%20def%20get_season(month)%3A%0A%20%20%20%20%20%20%20%20if%20month%20in%20%5B12%2C%201%2C%202%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20'Invierno'%0A%20%20%20%20%20%20%20%20elif%20month%20in%20%5B3%2C%204%2C%205%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20'Primavera'%0A%20%20%20%20%20%20%20%20elif%20month%20in%20%5B6%2C%207%2C%208%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20'Verano'%0A%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20'Oto%C3%B1o'%0A%0A%20%20%20%20%23%20variables%20nuevas%20extra%C3%ADdas%20de%20la%20fecha%20principal%0A%20%20%20%20fecha%20%3D%20df%5BFECHA_PRINCIPAL%5D%0A%20%20%20%20df%5B'semana_del_anio'%5D%20%3D%20fecha.dt.isocalendar().week%0A%20%20%20%20df%5B'dia_del_mes'%5D%20%3D%20fecha.dt.day%0A%20%20%20%20df%5B'dia_de_la_semana'%5D%20%3D%20fecha.dt.dayofweek%20%20%23%20Lunes%3D0%2C%20Domingo%3D6%0A%20%20%20%20df%5B'es_fin_de_semana'%5D%20%3D%20(df%5B'dia_de_la_semana'%5D%20%3E%3D%205).astype(int)%0A%20%20%20%20df%5B'trimestre'%5D%20%3D%20fecha.dt.quarter%0A%0A%20%20%20%20%23%20creaci%C3%B3n%20de%20'estacion'%20usando%20variable%20'mes'%0A%20%20%20%20df%5B'estacion'%5D%20%3D%20df%5B'mes'%5D.apply(get_season)%0A%0A%20%20%20%20%23%20conversi%C3%B3n%20de%20variables%20booleanas%20existentes%20a%20enteros%20(1%2F0)%0A%20%20%20%20%23%20el%20modelo%20prefiere%201%2F0%20que%20True%2FFalse.%0A%20%20%20%20df%5B'vacaciones_o_no'%5D%20%3D%20df%5B'vacaciones_o_no'%5D.astype(int)%0A%20%20%20%20df%5B'es_feriado'%5D%20%3D%20df%5B'es_feriado'%5D.astype(int)%0A%20%20%20%20df%5B'temporada_alta'%5D%20%3D%20df%5B'temporada_alta'%5D.astype(int)%0A%0A%20%20%20%20print(%22Variables%20temporales%20nuevas%20creadas%20(semana%2C%20dia%2C%20trimestre%2C%20estacion).%22)%0A%20%20%20%20print(%22Variables%20booleanas%20existentes%20(vacaciones%2C%20feriado%2C%20temporada_alta)%20convertidas%20a%200%2F1.%22)%0A%0A%20%20%20%20print(%22%5Cn---%20df.info()%20despu%C3%A9s%20de%20procesar%20variables%20temporales%20---%22)%0A%20%20%20%20df.info()%0A%20%20%20%20print(%22%5Cn---%20df.head().T%20despu%C3%A9s%20de%20procesar%20variables%20temporales%20---%22)%0A%20%20%20%20%23%20mostramos%20las%20variables%20que%20acabamos%20de%20crear%20yconvertir%0A%20%20%20%20print(df%5B%5B'product_sku'%2C%20'created_at'%2C%20'mes'%2C%20'estacion'%2C%20'es_feriado'%2C%20'temporada_alta'%5D%5D.head().T)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%203.%20Feature%20Engineering%3A%20Lags%20(Variables%20Sint%C3%A9ticas)%0A%0A%20%20%20%20Creamos%20variables%20%22lag%22%20(retrasadas)%20de%20nuestra%20%60VAR_OBJETIVO%60.%0A%20%20%20%20Esto%20es%20**lo%20m%C3%A1s%20importante**%20para%20predicci%C3%B3n%3A%20le%20decimos%20al%20modelo%0A%20%20%20%20cu%C3%A1l%20era%20el%20stock%20disponible%20%22ayer%22%2C%20%22la%20semana%20pasada%22%20y%20%22el%20mes%20pasado%22.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20**Explicaci%C3%B3n%3A**%0A%20%20%20%20-%20Creamos%20lag_1%2C%20lag_7%2C%20lag_30%20usando%20quantity_available.%20Que%20son%20la%20MEMORIA%20del%20modelo%0A%20%20%20%20%20%201.%20lag_1%3A%20Le%20da%20al%20modelo%20memoria%20a%20corto%20plazo.%0A%20%20%20%20%20%202.%20lag_7%3A%20Le%20da%20memoria%20semanal%20(comparar%20este%20lunes%20con%20el%20lunes%20pasado).%0A%20%20%20%20%20%203.%20lag_30%3A%20Le%20da%20memoria%20mensual.%0A%20%20%20%20%20%204.%20El%20groupby(ID_PRODUCTO)%20garantiza%20que%20el%20lag_1%20de%20la%20%22Barra%20Cereal%20Choco%22%20sea%20el%20de%20la%20%22Barra%20Cereal%20Choco%22%20de%20ayer%2C%20y%20no%20el%20de%20%22Agua%20Mineral%22.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(ID_PRODUCTO%2C%20VAR_OBJETIVO%2C%20df)%3A%0A%0A%20%20%20%20%23%20.groupby(ID_PRODUCTO)%20es%20crucial.%0A%0A%20%20%20%20df%5B'lag_1'%5D%20%3D%20df.groupby(ID_PRODUCTO)%5BVAR_OBJETIVO%5D.shift(1)%0A%20%20%20%20df%5B'lag_7'%5D%20%3D%20df.groupby(ID_PRODUCTO)%5BVAR_OBJETIVO%5D.shift(7)%0A%20%20%20%20df%5B'lag_30'%5D%20%3D%20df.groupby(ID_PRODUCTO)%5BVAR_OBJETIVO%5D.shift(30)%0A%0A%20%20%20%20print(f%22Variables%20Lag%20(1%2C%207%2C%2030)%20creadas%20para%20'%7BVAR_OBJETIVO%7D'.%22)%0A%0A%20%20%20%20%23%20mostramos%20c%C3%B3mo%20se%20ven%20(los%20primeros%20ser%C3%A1n%20NaN%2C%20es%20normal)%0A%20%20%20%20df%5B%5B'product_sku'%2C%20'created_at'%2C%20VAR_OBJETIVO%2C%20'lag_1'%2C%20'lag_7'%5D%5D.head()%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%204.%20Feature%20Engineering%3A%20Hist%C3%B3ricas%20y%20Estad%C3%ADsticas%0A%0A%20%20%20%20Calculamos%20estad%C3%ADsticas%20m%C3%B3viles%20para%20capturar%20la%20**tendencia**%20y%0A%20%20%20%20la%20**volatilidad**%20del%20stock.%0A%20%20%20%20-%20%20%20**Medias%20M%C3%B3viles%3A**%20Suavizan%20el%20ruido%20diario.%0A%20%20%20%20-%20%20%20**Media%20Exponencial%20(EWMA)%3A**%20Da%20m%C3%A1s%20peso%20a%20los%20datos%20recientes.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20**Justificaci%C3%B3n%3A**%0A%20%20%20%20-%20Creamos%20media_movil_7d%2C%20media_movil_30d%20y%20media_movil_exponencial.%0A%20%20%20%20-%20Dado%20que%20el%20stock%20diario%20puede%20ser%20%22ruidoso%22%20(subir%20y%20bajar%20mucho).%20Las%20medias%20m%C3%B3viles%20suavizan%20este%20ruido%20y%20le%20muestran%20al%20modelo%20la%20tendencia%20general.%0A%20%20%20%20-%20Esto%20le%20da%20al%20modelo%20el%20CONTEXTO%20DE%20TENDENCIA%20Y%20VOLATILIDAD.%20El%20lag_1%20le%20dice%20d%C3%B3nde%20estaba%20ayer%2C%20pero%20la%20media_movil_30d%20le%20dice%20si%20esa%20cifra%20es%20%22normal%22%20o%20si%20est%C3%A1%20muy%20por%20encima%2Fdebajo%20de%20la%20tendencia%20del%20mes.%20La%20std_movil_30d%20(desviaci%C3%B3n%20est%C3%A1ndar)%20le%20dice%20qu%C3%A9%20tan%20estable%20o%20no%20es%20el%20stock%20de%20ese%20producto.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(ID_PRODUCTO%2C%20VAR_OBJETIVO%2C%20df)%3A%0A%20%20%20%20%23%20Usamos%20.transform()%20para%20que%20el%20resultado%20(la%20media)%0A%20%20%20%20%23%20se%20alinee%20con%20el%20%C3%ADndice%20original%20del%20dataframe.%0A%0A%20%20%20%20%23%20%20Variables%20solicitadas%20%0A%20%20%20%20df%5B'media_movil_7d'%5D%20%3D%20df.groupby(ID_PRODUCTO)%5BVAR_OBJETIVO%5D.transform(%0A%20%20%20%20%20%20%20%20lambda%20x%3A%20x.rolling(7%2C%20min_periods%3D1).mean()%0A%20%20%20%20)%0A%20%20%20%20df%5B'media_movil_30d'%5D%20%3D%20df.groupby(ID_PRODUCTO)%5BVAR_OBJETIVO%5D.transform(%0A%20%20%20%20%20%20%20%20lambda%20x%3A%20x.rolling(30%2C%20min_periods%3D1).mean()%0A%20%20%20%20)%0A%20%20%20%20df%5B'media_movil_exponencial'%5D%20%3D%20df.groupby(ID_PRODUCTO)%5BVAR_OBJETIVO%5D.transform(%0A%20%20%20%20%20%20%20%20lambda%20x%3A%20x.ewm(span%3D7%2C%20adjust%3DFalse).mean()%0A%20%20%20%20)%0A%0A%20%20%20%20%23%20ariable%20extra%20(necesaria%20para%20'anomalia_stock')%0A%20%20%20%20df%5B'std_movil_30d'%5D%20%3D%20df.groupby(ID_PRODUCTO)%5BVAR_OBJETIVO%5D.transform(%0A%20%20%20%20%20%20%20%20lambda%20x%3A%20x.rolling(30%2C%20min_periods%3D1).std()%0A%20%20%20%20)%0A%20%20%20%20df%5B'std_movil_30d'%5D%20%3D%20df%5B'std_movil_30d'%5D.fillna(0)%20%0A%0A%20%20%20%20print(%22Medias%20m%C3%B3viles%20(7d%2C%2030d%2C%20Exp)%20y%20Std%20(30d)%20creadas.%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%205.%20Feature%20Engineering%3A%20Variables%20Sint%C3%A9ticas%0A%0A%20%20%20%20Creamos%20variables%20de%20negocio%20combinando%20otras.%0A%20%20%20%20Estas%20variables%20capturan%20conceptos%20m%C3%A1s%20complejos.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20**Explicaci%C3%B3n%3A**%0A%20%20%20%20-%20Creamos%20tendencia_stock%20(media%20corta%20vs.%20larga)%2C%20anomalia_stock%20(qu%C3%A9%20tan%20raro%20es%20el%20valor%20de%20hoy)%2C%20ratio_reservado_disponible%20(qu%C3%A9%20tan%20estresado%20est%C3%A1%20el%20stock)%20y%20ahora%20rotacion_estimada_30d%20(qu%C3%A9%20tan%20r%C3%A1pido%20se%20mueve).%0A%20%20%20%20-%20Estas%20son%20%22features%20de%20inteligencia%20de%20negocio%22.%20Son%20ATAJOS%20para%20el%20modelo.%20En%20lugar%20de%20que%20el%20modelo%20intente%20descubrir%20que%20restar%20la%20media%20de%207%20d%C3%ADas%20y%20la%20de%2030%20d%C3%ADas%20es%20importante%2C%20se%20lo%20damos%20directamente%20(tendencia_stock).%20Le%20damos%20el%20%22nivel%20de%20estr%C3%A9s%22%20y%20el%20%22nivel%20de%20velocidad%22%20pre-calculados.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(FECHA_PRINCIPAL%2C%20ID_PRODUCTO%2C%20VAR_OBJETIVO%2C%20df%2C%20np)%3A%0A%20%20%20%20%23%20'diff'%20calcula%20la%20diferencia%20con%20la%20fila%20anterior%20(lag_1)%0A%20%20%20%20df%5B'variacion_stock_diaria'%5D%20%3D%20df.groupby(ID_PRODUCTO)%5BVAR_OBJETIVO%5D.transform('diff')%0A%0A%20%20%20%20%23%20Tendencia%3A%20Compara%20la%20media%20de%20corto%20plazo%20vs%20la%20de%20largo%20plazo%0A%20%20%20%20df%5B'tendencia_stock'%5D%20%3D%20df%5B'media_movil_7d'%5D%20-%20df%5B'media_movil_30d'%5D%0A%0A%20%20%20%20%23%20D%C3%ADas%20desde%20el%20%C3%BAltimo%20pedido%0A%20%20%20%20df%5B'dias_desde_ultimo_pedido'%5D%20%3D%20(df%5BFECHA_PRINCIPAL%5D%20-%20df%5B'last_order_date'%5D).dt.days%0A%20%20%20%20df%5B'dias_desde_ultimo_pedido'%5D%20%3D%20df%5B'dias_desde_ultimo_pedido'%5D.fillna(9999)%0A%0A%20%20%20%20%23%20Ratio%20de%20%22estr%C3%A9s%22%20del%20stock%3A%20Reservado%20vs%20Disponible%0A%20%20%20%20df%5B'ratio_reservado_disponible'%5D%20%3D%20np.where(%0A%20%20%20%20%20%20%20%20df%5BVAR_OBJETIVO%5D%20%3E%200%2C%20%20%20%20%20%20%20%20%20%20%23%20Si%20quantity_available%20%3E%200%0A%20%20%20%20%20%20%20%20df%5B'quantity_reserved'%5D%20%2F%20df%5BVAR_OBJETIVO%5D%2C%20%23%20Calcula%20el%20ratio%0A%20%20%20%20%20%20%20%200%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Si%20no%2C%20el%20ratio%20es%200%0A%20%20%20%20)%0A%0A%20%20%20%20%23%20Nivel%20de%20Anomal%C3%ADa%20(Z-score)%3A%20Qu%C3%A9%20tan%20%22raro%22%20es%20el%20stock%20de%20hoy%0A%20%20%20%20df%5B'anomalia_stock'%5D%20%3D%20np.where(%0A%20%20%20%20%20%20%20%20df%5B'std_movil_30d'%5D%20%3E%200%2C%20%20%20%20%20%20%23%20Si%20la%20desviaci%C3%B3n%20es%20%3E%200%0A%20%20%20%20%20%20%20%20(df%5BVAR_OBJETIVO%5D%20-%20df%5B'media_movil_30d'%5D)%20%2F%20df%5B'std_movil_30d'%5D%2C%20%23%20Calcula%20Z-score%0A%20%20%20%20%20%20%20%200%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Si%20no%2C%20no%20hay%20anomal%C3%ADa%0A%20%20%20%20)%0A%0A%20%20%20%20%23%20calculamos%20rotacion%0A%20%20%20%20%23%20Usamos%20'average_daily_usage'%20para%20estimar%20las%20%22ventas%22%20mensuales%0A%20%20%20%20df%5B'rotacion_estimada_30d'%5D%20%3D%20np.where(%0A%20%20%20%20%20%20%20%20df%5B'media_movil_30d'%5D%20%3E%200%2C%20%23%20Evitar%20divisi%C3%B3n%20por%20cero%0A%20%20%20%20%20%20%20%20(df%5B'average_daily_usage'%5D%20*%2030)%20%2F%20df%5B'media_movil_30d'%5D%2C%0A%20%20%20%20%20%20%20%200%20%23%20Si%20no%20hay%20stock%20promedio%2C%20no%20hay%20rotaci%C3%B3n%0A%20%20%20%20)%0A%0A%20%20%20%20print(%22Variables%20sint%C3%A9ticas%20(variaci%C3%B3n%2C%20tendencia%2C%20ratios%2C%20anomal%C3%ADa)%20creadas.%22)%0A%20%20%20%20print(%22Variable%20sint%C3%A9tica%20'rotacion_estimada_30d'%20CREADA.%22)%0A%0A%20%20%20%20print(%22%5Cn---%20df.info()%20despu%C3%A9s%20de%20crear%20variables%20sint%C3%A9ticas%20---%22)%0A%20%20%20%20df.info()%0A%20%20%20%20print(%22%5Cn---%20df.head().T%20despu%C3%A9s%20de%20crear%20variables%20sint%C3%A9ticas%20---%22)%0A%20%20%20%20print(df.head().T)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20Nota%20sobre%20%60rotacion_promedio_mensual%60%0A%0A%0A%20%20%20%20No%20pudimos%20calcular%20la%20rotaci%C3%B3n%20*financiera*%20(que%20usa%20Costo%20de%20Ventas)%2C%0A%20%20%20%20pero%20s%C3%AD%20calculamos%20la%20**rotaci%C3%B3n%20en%20unidades**%20(%60rotacion_estimada_30d%60)%0A%20%20%20%20usando%20%60average_daily_usage%60%20y%20%60media_movil_30d%60.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%206.%20Limpieza%20Final%20y%20Guardado%0A%0A%20%20%20%20Los%20c%C3%A1lculos%20de%20lags%20y%20medias%20m%C3%B3viles%20crean%20valores%20%60NaN%60%20(Nulos)%0A%20%20%20%20al%20principio%20de%20la%20serie%20de%20cada%20producto%20(ej.%20los%20primeros%2030%20d%C3%ADas).%0A%0A%20%20%20%20**Eliminamos%20estas%20filas%20incompletas**%20para%20que%20el%20modelo%20entrene%0A%20%20%20%20solo%20con%20datos%20100%25%20completos.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(disabled%3DTrue)%0Adef%20_(df%2C%20mo%2C%20pd)%3A%0A%20%20%20%20%23%20Ver%20cu%C3%A1ntos%20nulos%20se%20crearon%20por%20los%20nuevos%20features%0A%20%20%20%20nulos_antes%20%3D%20df.isnull().sum().sort_values(ascending%3DFalse)%0A%20%20%20%20print(%22---%20Nulos%20ANTES%20de%20limpiar%20(Top%2010)%20---%22)%0A%20%20%20%20print(nulos_antes%5Bnulos_antes%20%3E%200%5D.head(10))%0A%0A%20%20%20%20%23%20Eliminamos%20filas%20donde%20nuestros%20lags%20principales%20son%20nulos%0A%20%20%20%20df_processed%20%3D%20df.dropna(%0A%20%20%20%20%20%20%20%20subset%3D%5B'lag_1'%2C%20'lag_7'%2C%20'lag_30'%2C%20'variacion_stock_diaria'%5D%0A%20%20%20%20)%0A%0A%20%20%20%20print(%22%5Cn---%20Nulos%20DESPU%C3%89S%20de%20limpiar%20---%22)%0A%20%20%20%20print(f%22Nulos%20restantes%3A%20%7Bdf_processed.isnull().sum().sum()%7D%22)%0A%20%20%20%20print(f%22%5CnFilas%20originales%3A%20%7Blen(df)%3A%2C%7D%22)%0A%20%20%20%20print(f%22Filas%20procesadas%3A%20%7Blen(df_processed)%3A%2C%7D%22)%0A%20%20%20%20print(f%22Filas%20eliminadas%20(por%20NaNs)%3A%20%7Blen(df)%20-%20len(df_processed)%3A%2C%7D%22)%0A%0A%20%20%20%20%23%20---%20Codificaci%C3%B3n%20y%20Selecci%C3%B3n%20Final%20---%0A%0A%20%20%20%20%23%20Convertir%20'estacion'%20(categ%C3%B3rica)%20a%20n%C3%BAmeros%20(One-Hot%20Encoding)%0A%20%20%20%20df_processed%20%3D%20pd.get_dummies(df_processed%2C%20columns%3D%5B'estacion'%5D%2C%20drop_first%3DTrue)%0A%0A%20%20%20%20%23%20Definir%20columnas%20a%20excluir.%0A%20%20%20%20%23%20%C2%A1F%C3%ADjate%20que%20'anio'%2C%20'mes'%2C%20'vacaciones_o_no'%2C%20'es_feriado'%2C%0A%20%20%20%20%23%20'temporada_alta'%20NO%20est%C3%A1n%20en%20esta%20lista%2C%20por%20lo%20tanto%20se%20MANTIENEN!%0A%20%20%20%20cols_a_excluir_final%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%23%20IDs%20y%20Texto%20que%20no%20aportan%20valor%20num%C3%A9rico%20directo%0A%20%20%20%20%20%20%20%20'id'%2C%20'product_id'%2C%20'supplier_id'%2C%20'created_by_id'%2C%20'record_sequence_number'%2C%0A%20%20%20%20%20%20%20%20'product_name'%2C%20'supplier_name'%2C%20'batch_number'%2C%20'warehouse_location'%2C%20%0A%20%20%20%20%20%20%20%20'shelf_location'%2C%20'stock_status'%2C%20'categoria_producto'%2C%20'subcategoria_producto'%2C%0A%0A%20%20%20%20%20%20%20%20%23%20Columnas%20de%20fecha%20originales%20que%20ya%20fueron%20transformadas%0A%20%20%20%20%20%20%20%20'created_at'%2C%20'last_order_date'%2C%20'last_stock_count_date'%2C%20'expiration_date'%2C%0A%20%20%20%20%20%20%20%20'last_updated_at'%0A%20%20%20%20%5D%0A%0A%20%20%20%20%23%20Filtrar%20las%20columnas%20que%20realmente%20existen%20en%20df_processed%0A%20%20%20%20cols_a_excluir_final%20%3D%20%5Bcol%20for%20col%20in%20cols_a_excluir_final%20if%20col%20in%20df_processed.columns%5D%0A%0A%20%20%20%20df_final%20%3D%20df_processed.drop(columns%3Dcols_a_excluir_final%2C%20errors%3D'ignore')%0A%0A%20%20%20%20%23%20---%20Guardado%20---%0A%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20processed_path%20%3D%20%22C%3A%2FUsers%2Fsamil%2FDesktop%2FAPRENDIZAJE%20AUTOMATICO%2FPRIMER%20INTERCICLO%2FPractica-2-Aprendizaje-Automactico%2Fdata%2Fdataset_processed_advanced.csv%22%0A%20%20%20%20%20%20%20%20df_final.to_csv(processed_path%2C%20index%3DFalse)%0A%20%20%20%20%20%20%20%20print(f%22%5Cn%C2%A1%C3%89xito!%20Dataset%20procesado%20guardado%20en%3A%20%7Bprocessed_path%7D%22)%0A%20%20%20%20%20%20%20%20mo.md(f%22**Dataset%20guardado%20en%3A**%20%60%7Bprocessed_path%7D%60%22)%0A%20%20%20%20except%20Exception%20as%20e%3A%0A%20%20%20%20%20%20%20%20print(f%22%5CnError%20al%20guardar%20el%20archivo%3A%20%7Be%7D%22)%0A%20%20%20%20return%20(df_final%2C)%0A%0A%0A%40app.cell%0Adef%20_(df_final%2C%20mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%207.%20Revisi%C3%B3n%20del%20Dataset%20Final%0A%0A%20%20%20%20Este%20es%20el%20dataset%20final%20que%20usaremos%20para%20entrenar%0A%20%20%20%20nuestro%20modelo%20predictivo.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20print(df_final.info())%0A%20%20%20%20df_final.head()%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Conclusiones%20de%20la%20Fase%201%3A%20Feature%20Engineering%0A%0A%20%20%20%20%20%20%20%20En%20esta%20fase%2C%20hemos%20transformado%20exitosamente%20el%20%60dataset.csv%60%20original%20en%20un%0A%20%20%20%20%20%20%20%20dataset%20100%25%20optimizado%20para%20Machine%20Learning.%20El%20objetivo%20ya%20no%20es%0A%20%20%20%20%20%20%20%20la%20exploraci%C3%B3n%20(EDA)%2C%20sino%20la%20**preparaci%C3%B3n%20para%20la%20predicci%C3%B3n**.%0A%0A%20%20%20%20**Puntos%20Principales%3A**%0A%0A%20%20%20%20%20%20%20%20**1.%20Dataset%20100%25%20Num%C3%A9rico%20y%20Limpio%3A**%0A%20%20%20%20%20%20%20%20El%20resultado%20final%20(%60dataset_processed_advanced.csv%60)%20tiene%20**7%2C050%20filas%20y%2041%20columnas**%2C%0A%20%20%20%20%20%20%20%20sin%20valores%20nulos%20y%20en%20un%20formato%20puramente%20num%C3%A9rico.%20Est%C3%A1%20listo%20para%20ser%0A%20%20%20%20%20%20%20%20consumido%20directamente%20por%20un%20modelo.%0A%0A%20%20%20%20%20%20%20%20**2.%20Creaci%C3%B3n%20de%20%22Memoria%22%20(Lags)%3A**%0A%20%20%20%20%20%20%20%20A%C3%B1adimos%20%60lag_1%60%2C%20%60lag_7%60%20y%20%60lag_30%60.%20Estas%20son%20las%20variables%20m%C3%A1s%20importantes%2C%0A%20%20%20%20%20%20%20%20ya%20que%20le%20dan%20al%20modelo%20la%20%22memoria%22%20de%20d%C3%B3nde%20estaba%20el%20stock%20ayer%2C%20la%20semana%0A%20%20%20%20%20%20%20%20pasada%20y%20el%20mes%20pasado.%0A%0A%20%20%20%20%20%20%20%20**3.%20Creaci%C3%B3n%20de%20%22Contexto%22%20(Medias%20M%C3%B3viles%20y%20Estad%C3%ADsticas)%3A**%0A%20%20%20%20%20%20%20%20No%20solo%20le%20dijimos%20al%20modelo%20*d%C3%B3nde*%20estaba%20el%20stock%20(lags)%2C%20sino%20que%20le%20dimos%0A%20%20%20%20%20%20%20%20*contexto*.%20Variables%20como%20%60media_movil_30d%60%20(tendencia%20estable)%2C%0A%20%20%20%20%20%20%20%20%60std_movil_30d%60%20(volatilidad)%20y%20%60anomalia_stock%60%20(qu%C3%A9%20tan%20%22raro%22%20es%20el%20valor%20de%20hoy)%0A%20%20%20%20%20%20%20%20le%20permiten%20al%20modelo%20tomar%20decisiones%20mucho%20m%C3%A1s%20inteligentes.%0A%0A%20%20%20%20%20%20%20%20**4.%20Creaci%C3%B3n%20de%20%22Inteligencia%20de%20Negocio%22%20(Variables%20Sint%C3%A9ticas)%3A**%0A%20%20%20%20%20%20%20%20Creamos%20variables%20que%20capturan%20conceptos%20de%20negocio%20complejos%20en%20un%20solo%20n%C3%BAmero.%0A%20%20%20%20%20%20%20%20Las%20m%C3%A1s%20importantes%20son%3A%0A%20%20%20%20%20%20%20%20-%20%60rotacion_estimada_30d%60%3A%20Le%20dice%20al%20modelo%20qu%C3%A9%20tan%20*r%C3%A1pido*%20se%20mueve%20este%20producto.%0A%20%20%20%20%20%20%20%20-%20%60ratio_reservado_disponible%60%3A%20Mide%20el%20%22estr%C3%A9s%22%20o%20la%20presi%C3%B3n%20sobre%20el%20stock%20disponible.%0A%20%20%20%20%20%20%20%20-%20%60tendencia_stock%60%3A%20Indica%20si%20el%20stock%20est%C3%A1%20creciendo%20o%20disminuyendo%20(media%20corta%20vs.%20larga).%0A%0A%20%20%20%20%20%20%20%20**5.%20El%20Intercambio%3A%20%22Calidad%20sobre%20Cantidad%22**%0A%20%20%20%20%20%20%20%20Decidimos%20conscientemente%20eliminar%20**450%20filas**%20(el%206%25%20de%20los%20datos).%0A%20%20%20%20%20%20%20%20Este%20%22costo%22%20fue%20necesario%20para%20poder%20calcular%20los%20features%20de%2030%20d%C3%ADas%0A%20%20%20%20%20%20%20%20(como%20%60lag_30%60%20y%20%60media_movil_30d%60).%0A%0A%20%20%20%20%20%20%20%20**%C2%BFPor%20qu%C3%A9%20fue%20una%20buena%20decisi%C3%B3n%3F**%20Sacrificamos%20el%206%25%20de%20nuestros%20peores%20datos%0A%20%20%20%20%20%20%20%20(el%20%22arranque%20en%20fr%C3%ADo%22%20de%20cada%20producto%2C%20que%20no%20ten%C3%ADa%20historia)%20para%20hacer%0A%20%20%20%20%20%20%20%20que%20el%2094%25%20restante%20de%20los%20datos%20sea%20m%C3%A1s%20inteligente.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20import%20marimo%20as%20mo%0A%20%20%20%20return%20(mo%2C)%0A%0A%0Aif%20__name__%20%3D%3D%20%22__main__%22%3A%0A%20%20%20%20app.run()%0A
</marimo-code>

<marimo-code-hash hidden="">5ca75c95d1517bdc6a1e95d558441a6c</marimo-code-hash>
</body>
</html>
